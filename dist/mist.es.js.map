{"version":3,"file":"mist.es.js","sources":["../node_modules/.pnpm/@vue+shared@3.2.45/node_modules/@vue/shared/dist/shared.esm-bundler.js","../src/scheduler.ts","../src/directives/bind.ts","../src/utils.ts","../src/directives/on.ts","../src/directives/show.ts","../src/directives/text.ts","../src/directives/html.ts","../src/directives/model.ts","../src/eval.ts","../src/directives/effect.ts","../src/directives/index.ts","../src/directives/if.ts","../src/directives/for.ts","../src/directives/ref.ts","../src/walk.ts","../src/context.ts","../src/block.ts","../src/app.ts","../src/index.ts"],"sourcesContent":["/**\n * Make a map and return a function for checking if a key\n * is in that map.\n * IMPORTANT: all calls of this function must be prefixed with\n * \\/\\*#\\_\\_PURE\\_\\_\\*\\/\n * So that rollup can tree-shake them if necessary.\n */\nfunction makeMap(str, expectsLowerCase) {\n    const map = Object.create(null);\n    const list = str.split(',');\n    for (let i = 0; i < list.length; i++) {\n        map[list[i]] = true;\n    }\n    return expectsLowerCase ? val => !!map[val.toLowerCase()] : val => !!map[val];\n}\n\n/**\n * dev only flag -> name mapping\n */\nconst PatchFlagNames = {\n    [1 /* PatchFlags.TEXT */]: `TEXT`,\n    [2 /* PatchFlags.CLASS */]: `CLASS`,\n    [4 /* PatchFlags.STYLE */]: `STYLE`,\n    [8 /* PatchFlags.PROPS */]: `PROPS`,\n    [16 /* PatchFlags.FULL_PROPS */]: `FULL_PROPS`,\n    [32 /* PatchFlags.HYDRATE_EVENTS */]: `HYDRATE_EVENTS`,\n    [64 /* PatchFlags.STABLE_FRAGMENT */]: `STABLE_FRAGMENT`,\n    [128 /* PatchFlags.KEYED_FRAGMENT */]: `KEYED_FRAGMENT`,\n    [256 /* PatchFlags.UNKEYED_FRAGMENT */]: `UNKEYED_FRAGMENT`,\n    [512 /* PatchFlags.NEED_PATCH */]: `NEED_PATCH`,\n    [1024 /* PatchFlags.DYNAMIC_SLOTS */]: `DYNAMIC_SLOTS`,\n    [2048 /* PatchFlags.DEV_ROOT_FRAGMENT */]: `DEV_ROOT_FRAGMENT`,\n    [-1 /* PatchFlags.HOISTED */]: `HOISTED`,\n    [-2 /* PatchFlags.BAIL */]: `BAIL`\n};\n\n/**\n * Dev only\n */\nconst slotFlagsText = {\n    [1 /* SlotFlags.STABLE */]: 'STABLE',\n    [2 /* SlotFlags.DYNAMIC */]: 'DYNAMIC',\n    [3 /* SlotFlags.FORWARDED */]: 'FORWARDED'\n};\n\nconst GLOBALS_WHITE_LISTED = 'Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,' +\n    'decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,' +\n    'Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt';\nconst isGloballyWhitelisted = /*#__PURE__*/ makeMap(GLOBALS_WHITE_LISTED);\n\nconst range = 2;\nfunction generateCodeFrame(source, start = 0, end = source.length) {\n    // Split the content into individual lines but capture the newline sequence\n    // that separated each line. This is important because the actual sequence is\n    // needed to properly take into account the full line length for offset\n    // comparison\n    let lines = source.split(/(\\r?\\n)/);\n    // Separate the lines and newline sequences into separate arrays for easier referencing\n    const newlineSequences = lines.filter((_, idx) => idx % 2 === 1);\n    lines = lines.filter((_, idx) => idx % 2 === 0);\n    let count = 0;\n    const res = [];\n    for (let i = 0; i < lines.length; i++) {\n        count +=\n            lines[i].length +\n                ((newlineSequences[i] && newlineSequences[i].length) || 0);\n        if (count >= start) {\n            for (let j = i - range; j <= i + range || end > count; j++) {\n                if (j < 0 || j >= lines.length)\n                    continue;\n                const line = j + 1;\n                res.push(`${line}${' '.repeat(Math.max(3 - String(line).length, 0))}|  ${lines[j]}`);\n                const lineLength = lines[j].length;\n                const newLineSeqLength = (newlineSequences[j] && newlineSequences[j].length) || 0;\n                if (j === i) {\n                    // push underline\n                    const pad = start - (count - (lineLength + newLineSeqLength));\n                    const length = Math.max(1, end > count ? lineLength - pad : end - start);\n                    res.push(`   |  ` + ' '.repeat(pad) + '^'.repeat(length));\n                }\n                else if (j > i) {\n                    if (end > count) {\n                        const length = Math.max(Math.min(end - count, lineLength), 1);\n                        res.push(`   |  ` + '^'.repeat(length));\n                    }\n                    count += lineLength + newLineSeqLength;\n                }\n            }\n            break;\n        }\n    }\n    return res.join('\\n');\n}\n\nfunction normalizeStyle(value) {\n    if (isArray(value)) {\n        const res = {};\n        for (let i = 0; i < value.length; i++) {\n            const item = value[i];\n            const normalized = isString(item)\n                ? parseStringStyle(item)\n                : normalizeStyle(item);\n            if (normalized) {\n                for (const key in normalized) {\n                    res[key] = normalized[key];\n                }\n            }\n        }\n        return res;\n    }\n    else if (isString(value)) {\n        return value;\n    }\n    else if (isObject(value)) {\n        return value;\n    }\n}\nconst listDelimiterRE = /;(?![^(]*\\))/g;\nconst propertyDelimiterRE = /:([^]+)/;\nconst styleCommentRE = /\\/\\*.*?\\*\\//gs;\nfunction parseStringStyle(cssText) {\n    const ret = {};\n    cssText\n        .replace(styleCommentRE, '')\n        .split(listDelimiterRE)\n        .forEach(item => {\n        if (item) {\n            const tmp = item.split(propertyDelimiterRE);\n            tmp.length > 1 && (ret[tmp[0].trim()] = tmp[1].trim());\n        }\n    });\n    return ret;\n}\nfunction stringifyStyle(styles) {\n    let ret = '';\n    if (!styles || isString(styles)) {\n        return ret;\n    }\n    for (const key in styles) {\n        const value = styles[key];\n        const normalizedKey = key.startsWith(`--`) ? key : hyphenate(key);\n        if (isString(value) || typeof value === 'number') {\n            // only render valid values\n            ret += `${normalizedKey}:${value};`;\n        }\n    }\n    return ret;\n}\nfunction normalizeClass(value) {\n    let res = '';\n    if (isString(value)) {\n        res = value;\n    }\n    else if (isArray(value)) {\n        for (let i = 0; i < value.length; i++) {\n            const normalized = normalizeClass(value[i]);\n            if (normalized) {\n                res += normalized + ' ';\n            }\n        }\n    }\n    else if (isObject(value)) {\n        for (const name in value) {\n            if (value[name]) {\n                res += name + ' ';\n            }\n        }\n    }\n    return res.trim();\n}\nfunction normalizeProps(props) {\n    if (!props)\n        return null;\n    let { class: klass, style } = props;\n    if (klass && !isString(klass)) {\n        props.class = normalizeClass(klass);\n    }\n    if (style) {\n        props.style = normalizeStyle(style);\n    }\n    return props;\n}\n\n// These tag configs are shared between compiler-dom and runtime-dom, so they\n// https://developer.mozilla.org/en-US/docs/Web/HTML/Element\nconst HTML_TAGS = 'html,body,base,head,link,meta,style,title,address,article,aside,footer,' +\n    'header,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,' +\n    'figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,' +\n    'data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,' +\n    'time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,' +\n    'canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,' +\n    'th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,' +\n    'option,output,progress,select,textarea,details,dialog,menu,' +\n    'summary,template,blockquote,iframe,tfoot';\n// https://developer.mozilla.org/en-US/docs/Web/SVG/Element\nconst SVG_TAGS = 'svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,' +\n    'defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,' +\n    'feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,' +\n    'feDistanceLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,' +\n    'feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,' +\n    'fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,' +\n    'foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,' +\n    'mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,' +\n    'polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,' +\n    'text,textPath,title,tspan,unknown,use,view';\nconst VOID_TAGS = 'area,base,br,col,embed,hr,img,input,link,meta,param,source,track,wbr';\n/**\n * Compiler only.\n * Do NOT use in runtime code paths unless behind `(process.env.NODE_ENV !== 'production')` flag.\n */\nconst isHTMLTag = /*#__PURE__*/ makeMap(HTML_TAGS);\n/**\n * Compiler only.\n * Do NOT use in runtime code paths unless behind `(process.env.NODE_ENV !== 'production')` flag.\n */\nconst isSVGTag = /*#__PURE__*/ makeMap(SVG_TAGS);\n/**\n * Compiler only.\n * Do NOT use in runtime code paths unless behind `(process.env.NODE_ENV !== 'production')` flag.\n */\nconst isVoidTag = /*#__PURE__*/ makeMap(VOID_TAGS);\n\n/**\n * On the client we only need to offer special cases for boolean attributes that\n * have different names from their corresponding dom properties:\n * - itemscope -> N/A\n * - allowfullscreen -> allowFullscreen\n * - formnovalidate -> formNoValidate\n * - ismap -> isMap\n * - nomodule -> noModule\n * - novalidate -> noValidate\n * - readonly -> readOnly\n */\nconst specialBooleanAttrs = `itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly`;\nconst isSpecialBooleanAttr = /*#__PURE__*/ makeMap(specialBooleanAttrs);\n/**\n * The full list is needed during SSR to produce the correct initial markup.\n */\nconst isBooleanAttr = /*#__PURE__*/ makeMap(specialBooleanAttrs +\n    `,async,autofocus,autoplay,controls,default,defer,disabled,hidden,` +\n    `loop,open,required,reversed,scoped,seamless,` +\n    `checked,muted,multiple,selected`);\n/**\n * Boolean attributes should be included if the value is truthy or ''.\n * e.g. `<select multiple>` compiles to `{ multiple: '' }`\n */\nfunction includeBooleanAttr(value) {\n    return !!value || value === '';\n}\nconst unsafeAttrCharRE = /[>/=\"'\\u0009\\u000a\\u000c\\u0020]/;\nconst attrValidationCache = {};\nfunction isSSRSafeAttrName(name) {\n    if (attrValidationCache.hasOwnProperty(name)) {\n        return attrValidationCache[name];\n    }\n    const isUnsafe = unsafeAttrCharRE.test(name);\n    if (isUnsafe) {\n        console.error(`unsafe attribute name: ${name}`);\n    }\n    return (attrValidationCache[name] = !isUnsafe);\n}\nconst propsToAttrMap = {\n    acceptCharset: 'accept-charset',\n    className: 'class',\n    htmlFor: 'for',\n    httpEquiv: 'http-equiv'\n};\n/**\n * Known attributes, this is used for stringification of runtime static nodes\n * so that we don't stringify bindings that cannot be set from HTML.\n * Don't also forget to allow `data-*` and `aria-*`!\n * Generated from https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes\n */\nconst isKnownHtmlAttr = /*#__PURE__*/ makeMap(`accept,accept-charset,accesskey,action,align,allow,alt,async,` +\n    `autocapitalize,autocomplete,autofocus,autoplay,background,bgcolor,` +\n    `border,buffered,capture,challenge,charset,checked,cite,class,code,` +\n    `codebase,color,cols,colspan,content,contenteditable,contextmenu,controls,` +\n    `coords,crossorigin,csp,data,datetime,decoding,default,defer,dir,dirname,` +\n    `disabled,download,draggable,dropzone,enctype,enterkeyhint,for,form,` +\n    `formaction,formenctype,formmethod,formnovalidate,formtarget,headers,` +\n    `height,hidden,high,href,hreflang,http-equiv,icon,id,importance,integrity,` +\n    `ismap,itemprop,keytype,kind,label,lang,language,loading,list,loop,low,` +\n    `manifest,max,maxlength,minlength,media,min,multiple,muted,name,novalidate,` +\n    `open,optimum,pattern,ping,placeholder,poster,preload,radiogroup,readonly,` +\n    `referrerpolicy,rel,required,reversed,rows,rowspan,sandbox,scope,scoped,` +\n    `selected,shape,size,sizes,slot,span,spellcheck,src,srcdoc,srclang,srcset,` +\n    `start,step,style,summary,tabindex,target,title,translate,type,usemap,` +\n    `value,width,wrap`);\n/**\n * Generated from https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute\n */\nconst isKnownSvgAttr = /*#__PURE__*/ makeMap(`xmlns,accent-height,accumulate,additive,alignment-baseline,alphabetic,amplitude,` +\n    `arabic-form,ascent,attributeName,attributeType,azimuth,baseFrequency,` +\n    `baseline-shift,baseProfile,bbox,begin,bias,by,calcMode,cap-height,class,` +\n    `clip,clipPathUnits,clip-path,clip-rule,color,color-interpolation,` +\n    `color-interpolation-filters,color-profile,color-rendering,` +\n    `contentScriptType,contentStyleType,crossorigin,cursor,cx,cy,d,decelerate,` +\n    `descent,diffuseConstant,direction,display,divisor,dominant-baseline,dur,dx,` +\n    `dy,edgeMode,elevation,enable-background,end,exponent,fill,fill-opacity,` +\n    `fill-rule,filter,filterRes,filterUnits,flood-color,flood-opacity,` +\n    `font-family,font-size,font-size-adjust,font-stretch,font-style,` +\n    `font-variant,font-weight,format,from,fr,fx,fy,g1,g2,glyph-name,` +\n    `glyph-orientation-horizontal,glyph-orientation-vertical,glyphRef,` +\n    `gradientTransform,gradientUnits,hanging,height,href,hreflang,horiz-adv-x,` +\n    `horiz-origin-x,id,ideographic,image-rendering,in,in2,intercept,k,k1,k2,k3,` +\n    `k4,kernelMatrix,kernelUnitLength,kerning,keyPoints,keySplines,keyTimes,` +\n    `lang,lengthAdjust,letter-spacing,lighting-color,limitingConeAngle,local,` +\n    `marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,` +\n    `mask,maskContentUnits,maskUnits,mathematical,max,media,method,min,mode,` +\n    `name,numOctaves,offset,opacity,operator,order,orient,orientation,origin,` +\n    `overflow,overline-position,overline-thickness,panose-1,paint-order,path,` +\n    `pathLength,patternContentUnits,patternTransform,patternUnits,ping,` +\n    `pointer-events,points,pointsAtX,pointsAtY,pointsAtZ,preserveAlpha,` +\n    `preserveAspectRatio,primitiveUnits,r,radius,referrerPolicy,refX,refY,rel,` +\n    `rendering-intent,repeatCount,repeatDur,requiredExtensions,requiredFeatures,` +\n    `restart,result,rotate,rx,ry,scale,seed,shape-rendering,slope,spacing,` +\n    `specularConstant,specularExponent,speed,spreadMethod,startOffset,` +\n    `stdDeviation,stemh,stemv,stitchTiles,stop-color,stop-opacity,` +\n    `strikethrough-position,strikethrough-thickness,string,stroke,` +\n    `stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,` +\n    `stroke-miterlimit,stroke-opacity,stroke-width,style,surfaceScale,` +\n    `systemLanguage,tabindex,tableValues,target,targetX,targetY,text-anchor,` +\n    `text-decoration,text-rendering,textLength,to,transform,transform-origin,` +\n    `type,u1,u2,underline-position,underline-thickness,unicode,unicode-bidi,` +\n    `unicode-range,units-per-em,v-alphabetic,v-hanging,v-ideographic,` +\n    `v-mathematical,values,vector-effect,version,vert-adv-y,vert-origin-x,` +\n    `vert-origin-y,viewBox,viewTarget,visibility,width,widths,word-spacing,` +\n    `writing-mode,x,x-height,x1,x2,xChannelSelector,xlink:actuate,xlink:arcrole,` +\n    `xlink:href,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,` +\n    `xml:space,y,y1,y2,yChannelSelector,z,zoomAndPan`);\n\nconst escapeRE = /[\"'&<>]/;\nfunction escapeHtml(string) {\n    const str = '' + string;\n    const match = escapeRE.exec(str);\n    if (!match) {\n        return str;\n    }\n    let html = '';\n    let escaped;\n    let index;\n    let lastIndex = 0;\n    for (index = match.index; index < str.length; index++) {\n        switch (str.charCodeAt(index)) {\n            case 34: // \"\n                escaped = '&quot;';\n                break;\n            case 38: // &\n                escaped = '&amp;';\n                break;\n            case 39: // '\n                escaped = '&#39;';\n                break;\n            case 60: // <\n                escaped = '&lt;';\n                break;\n            case 62: // >\n                escaped = '&gt;';\n                break;\n            default:\n                continue;\n        }\n        if (lastIndex !== index) {\n            html += str.slice(lastIndex, index);\n        }\n        lastIndex = index + 1;\n        html += escaped;\n    }\n    return lastIndex !== index ? html + str.slice(lastIndex, index) : html;\n}\n// https://www.w3.org/TR/html52/syntax.html#comments\nconst commentStripRE = /^-?>|<!--|-->|--!>|<!-$/g;\nfunction escapeHtmlComment(src) {\n    return src.replace(commentStripRE, '');\n}\n\nfunction looseCompareArrays(a, b) {\n    if (a.length !== b.length)\n        return false;\n    let equal = true;\n    for (let i = 0; equal && i < a.length; i++) {\n        equal = looseEqual(a[i], b[i]);\n    }\n    return equal;\n}\nfunction looseEqual(a, b) {\n    if (a === b)\n        return true;\n    let aValidType = isDate(a);\n    let bValidType = isDate(b);\n    if (aValidType || bValidType) {\n        return aValidType && bValidType ? a.getTime() === b.getTime() : false;\n    }\n    aValidType = isSymbol(a);\n    bValidType = isSymbol(b);\n    if (aValidType || bValidType) {\n        return a === b;\n    }\n    aValidType = isArray(a);\n    bValidType = isArray(b);\n    if (aValidType || bValidType) {\n        return aValidType && bValidType ? looseCompareArrays(a, b) : false;\n    }\n    aValidType = isObject(a);\n    bValidType = isObject(b);\n    if (aValidType || bValidType) {\n        /* istanbul ignore if: this if will probably never be called */\n        if (!aValidType || !bValidType) {\n            return false;\n        }\n        const aKeysCount = Object.keys(a).length;\n        const bKeysCount = Object.keys(b).length;\n        if (aKeysCount !== bKeysCount) {\n            return false;\n        }\n        for (const key in a) {\n            const aHasKey = a.hasOwnProperty(key);\n            const bHasKey = b.hasOwnProperty(key);\n            if ((aHasKey && !bHasKey) ||\n                (!aHasKey && bHasKey) ||\n                !looseEqual(a[key], b[key])) {\n                return false;\n            }\n        }\n    }\n    return String(a) === String(b);\n}\nfunction looseIndexOf(arr, val) {\n    return arr.findIndex(item => looseEqual(item, val));\n}\n\n/**\n * For converting {{ interpolation }} values to displayed strings.\n * @private\n */\nconst toDisplayString = (val) => {\n    return isString(val)\n        ? val\n        : val == null\n            ? ''\n            : isArray(val) ||\n                (isObject(val) &&\n                    (val.toString === objectToString || !isFunction(val.toString)))\n                ? JSON.stringify(val, replacer, 2)\n                : String(val);\n};\nconst replacer = (_key, val) => {\n    // can't use isRef here since @vue/shared has no deps\n    if (val && val.__v_isRef) {\n        return replacer(_key, val.value);\n    }\n    else if (isMap(val)) {\n        return {\n            [`Map(${val.size})`]: [...val.entries()].reduce((entries, [key, val]) => {\n                entries[`${key} =>`] = val;\n                return entries;\n            }, {})\n        };\n    }\n    else if (isSet(val)) {\n        return {\n            [`Set(${val.size})`]: [...val.values()]\n        };\n    }\n    else if (isObject(val) && !isArray(val) && !isPlainObject(val)) {\n        return String(val);\n    }\n    return val;\n};\n\nconst EMPTY_OBJ = (process.env.NODE_ENV !== 'production')\n    ? Object.freeze({})\n    : {};\nconst EMPTY_ARR = (process.env.NODE_ENV !== 'production') ? Object.freeze([]) : [];\nconst NOOP = () => { };\n/**\n * Always return false.\n */\nconst NO = () => false;\nconst onRE = /^on[^a-z]/;\nconst isOn = (key) => onRE.test(key);\nconst isModelListener = (key) => key.startsWith('onUpdate:');\nconst extend = Object.assign;\nconst remove = (arr, el) => {\n    const i = arr.indexOf(el);\n    if (i > -1) {\n        arr.splice(i, 1);\n    }\n};\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\nconst hasOwn = (val, key) => hasOwnProperty.call(val, key);\nconst isArray = Array.isArray;\nconst isMap = (val) => toTypeString(val) === '[object Map]';\nconst isSet = (val) => toTypeString(val) === '[object Set]';\nconst isDate = (val) => toTypeString(val) === '[object Date]';\nconst isFunction = (val) => typeof val === 'function';\nconst isString = (val) => typeof val === 'string';\nconst isSymbol = (val) => typeof val === 'symbol';\nconst isObject = (val) => val !== null && typeof val === 'object';\nconst isPromise = (val) => {\n    return isObject(val) && isFunction(val.then) && isFunction(val.catch);\n};\nconst objectToString = Object.prototype.toString;\nconst toTypeString = (value) => objectToString.call(value);\nconst toRawType = (value) => {\n    // extract \"RawType\" from strings like \"[object RawType]\"\n    return toTypeString(value).slice(8, -1);\n};\nconst isPlainObject = (val) => toTypeString(val) === '[object Object]';\nconst isIntegerKey = (key) => isString(key) &&\n    key !== 'NaN' &&\n    key[0] !== '-' &&\n    '' + parseInt(key, 10) === key;\nconst isReservedProp = /*#__PURE__*/ makeMap(\n// the leading comma is intentional so empty string \"\" is also included\n',key,ref,ref_for,ref_key,' +\n    'onVnodeBeforeMount,onVnodeMounted,' +\n    'onVnodeBeforeUpdate,onVnodeUpdated,' +\n    'onVnodeBeforeUnmount,onVnodeUnmounted');\nconst isBuiltInDirective = /*#__PURE__*/ makeMap('bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text,memo');\nconst cacheStringFunction = (fn) => {\n    const cache = Object.create(null);\n    return ((str) => {\n        const hit = cache[str];\n        return hit || (cache[str] = fn(str));\n    });\n};\nconst camelizeRE = /-(\\w)/g;\n/**\n * @private\n */\nconst camelize = cacheStringFunction((str) => {\n    return str.replace(camelizeRE, (_, c) => (c ? c.toUpperCase() : ''));\n});\nconst hyphenateRE = /\\B([A-Z])/g;\n/**\n * @private\n */\nconst hyphenate = cacheStringFunction((str) => str.replace(hyphenateRE, '-$1').toLowerCase());\n/**\n * @private\n */\nconst capitalize = cacheStringFunction((str) => str.charAt(0).toUpperCase() + str.slice(1));\n/**\n * @private\n */\nconst toHandlerKey = cacheStringFunction((str) => str ? `on${capitalize(str)}` : ``);\n// compare whether a value has changed, accounting for NaN.\nconst hasChanged = (value, oldValue) => !Object.is(value, oldValue);\nconst invokeArrayFns = (fns, arg) => {\n    for (let i = 0; i < fns.length; i++) {\n        fns[i](arg);\n    }\n};\nconst def = (obj, key, value) => {\n    Object.defineProperty(obj, key, {\n        configurable: true,\n        enumerable: false,\n        value\n    });\n};\nconst toNumber = (val) => {\n    const n = parseFloat(val);\n    return isNaN(n) ? val : n;\n};\nlet _globalThis;\nconst getGlobalThis = () => {\n    return (_globalThis ||\n        (_globalThis =\n            typeof globalThis !== 'undefined'\n                ? globalThis\n                : typeof self !== 'undefined'\n                    ? self\n                    : typeof window !== 'undefined'\n                        ? window\n                        : typeof global !== 'undefined'\n                            ? global\n                            : {}));\n};\nconst identRE = /^[_$a-zA-Z\\xA0-\\uFFFF][_$a-zA-Z0-9\\xA0-\\uFFFF]*$/;\nfunction genPropsAccessExp(name) {\n    return identRE.test(name)\n        ? `__props.${name}`\n        : `__props[${JSON.stringify(name)}]`;\n}\n\nexport { EMPTY_ARR, EMPTY_OBJ, NO, NOOP, PatchFlagNames, camelize, capitalize, def, escapeHtml, escapeHtmlComment, extend, genPropsAccessExp, generateCodeFrame, getGlobalThis, hasChanged, hasOwn, hyphenate, includeBooleanAttr, invokeArrayFns, isArray, isBooleanAttr, isBuiltInDirective, isDate, isFunction, isGloballyWhitelisted, isHTMLTag, isIntegerKey, isKnownHtmlAttr, isKnownSvgAttr, isMap, isModelListener, isObject, isOn, isPlainObject, isPromise, isReservedProp, isSSRSafeAttrName, isSVGTag, isSet, isSpecialBooleanAttr, isString, isSymbol, isVoidTag, looseEqual, looseIndexOf, makeMap, normalizeClass, normalizeProps, normalizeStyle, objectToString, parseStringStyle, propsToAttrMap, remove, slotFlagsText, stringifyStyle, toDisplayString, toHandlerKey, toNumber, toRawType, toTypeString };\n","let queued = false\r\nconst queue: Function[] = []\r\nconst p = Promise.resolve()\r\n\r\nexport const nextTick = (fn: () => void) => p.then(fn)\r\n\r\nexport const queueJob = (job: Function) => {\r\n  if (!queue.includes(job)) queue.push(job)\r\n  if (!queued) {\r\n    queued = true\r\n    nextTick(flushJobs)\r\n  }\r\n}\r\n\r\nconst flushJobs = () => {\r\n  for (const job of queue) {\r\n    job()\r\n  }\r\n  queue.length = 0\r\n  queued = false\r\n}\r\n","import { Directive } from '.'\r\nimport {\r\n  normalizeClass,\r\n  normalizeStyle,\r\n  isString,\r\n  isArray,\r\n  hyphenate,\r\n  camelize\r\n} from '@vue/shared'\r\n\r\nconst forceAttrRE = /^(spellcheck|draggable|form|list|type)$/\r\n\r\nexport const bind: Directive<Element & { _class?: string }> = ({\r\n  el,\r\n  get,\r\n  effect,\r\n  arg,\r\n  modifiers\r\n}) => {\r\n  let prevValue: any\r\n\r\n  // 记录静态类名\r\n  if (arg === 'class') {\r\n    el._class = el.className\r\n  }\r\n\r\n  effect(() => {\r\n    let value = get()\r\n    if (arg) {\r\n      if (modifiers?.camel) {\r\n        arg = camelize(arg)\r\n      }\r\n      setProp(el, arg, value, prevValue)\r\n    } else {\r\n      for (const key in value) {\r\n        setProp(el, key, value[key], prevValue && prevValue[key])\r\n      }\r\n      for (const key in prevValue) {\r\n        if (!value || !(key in value)) {\r\n          setProp(el, key, null)\r\n        }\r\n      }\r\n    }\r\n    prevValue = value\r\n  })\r\n}\r\n\r\nconst setProp = (\r\n  el: Element & { _class?: string },\r\n  key: string,\r\n  value: any,\r\n  prevValue?: any\r\n) => {\r\n  if (key === 'class') {\r\n    el.setAttribute(\r\n      'class',\r\n      normalizeClass(el._class ? [el._class, value] : value) || ''\r\n    )\r\n  } else if (key === 'style') {\r\n    value = normalizeStyle(value)\r\n    const { style } = el as HTMLElement\r\n    if (!value) {\r\n      el.removeAttribute('style')\r\n    } else if (isString(value)) {\r\n      if (value !== prevValue) style.cssText = value\r\n    } else {\r\n      for (const key in value) {\r\n        setStyle(style, key, value[key])\r\n      }\r\n      if (prevValue && !isString(prevValue)) {\r\n        for (const key in prevValue) {\r\n          if (value[key] == null) {\r\n            setStyle(style, key, '')\r\n          }\r\n        }\r\n      }\r\n    }\r\n  } else if (\r\n    !(el instanceof SVGElement) &&\r\n    key in el &&\r\n    !forceAttrRE.test(key)\r\n  ) {\r\n    // @ts-ignore\r\n    el[key] = value\r\n    if (key === 'value') {\r\n      // @ts-ignore\r\n      el._value = value\r\n    }\r\n  } else {\r\n    // 特殊情况：<input v-model type=\"checkbox\"> 带有\r\n    // :true-value 和 :false-value\r\n    // 将值存储为 DOM 属性，因为非字符串值会被\r\n    // 转换为字符串\r\n    if (key === 'true-value') {\r\n      ;(el as any)._trueValue = value\r\n    } else if (key === 'false-value') {\r\n      ;(el as any)._falseValue = value\r\n    } else if (value != null) {\r\n      el.setAttribute(key, value)\r\n    } else {\r\n      el.removeAttribute(key)\r\n    }\r\n  }\r\n}\r\n\r\nconst importantRE = /\\s*!important$/\r\n\r\nconst setStyle = (\r\n  style: CSSStyleDeclaration,\r\n  name: string,\r\n  val: string | string[]\r\n) => {\r\n  if (isArray(val)) {\r\n    val.forEach((v) => setStyle(style, name, v))\r\n  } else {\r\n    if (name.startsWith('--')) {\r\n      // 自定义属性定义\r\n      style.setProperty(name, val)\r\n    } else {\r\n      if (importantRE.test(val)) {\r\n        // !important\r\n        style.setProperty(\r\n          hyphenate(name),\r\n          val.replace(importantRE, ''),\r\n          'important'\r\n        )\r\n      } else {\r\n        style[name as any] = val\r\n      }\r\n    }\r\n  }\r\n}\r\n","export const checkAttr = (el: Element, name: string): string | null => {\n  const val = el.getAttribute(name)\n  if (val != null) el.removeAttribute(name)\n  return val\n}\n\nexport const listen = (\n  el: Element,\n  event: string,\n  handler: any,\n  options?: any\n) => {\n  el.addEventListener(event, handler, options)\n}\n","import { Directive } from '.'\nimport { hyphenate } from '@vue/shared'\nimport { listen } from '../utils'\nimport { nextTick } from '../scheduler'\n\n// 与 vue 2 相同\nconst simplePathRE =\n  /^[A-Za-z_$][\\w$]*(?:\\.[A-Za-z_$][\\w$]*|\\['[^']*?']|\\[\"[^\"]*?\"]|\\[\\d+]|\\[[A-Za-z_$][\\w$]*])*$/\n\nconst systemModifiers = ['ctrl', 'shift', 'alt', 'meta']\n\ntype KeyedEvent = KeyboardEvent | MouseEvent | TouchEvent\n\nconst modifierGuards: Record<\n  string,\n  (e: Event, modifiers: Record<string, true>) => void | boolean\n> = {\n  stop: (e) => e.stopPropagation(),\n  prevent: (e) => e.preventDefault(),\n  self: (e) => e.target !== e.currentTarget,\n  ctrl: (e) => !(e as KeyedEvent).ctrlKey,\n  shift: (e) => !(e as KeyedEvent).shiftKey,\n  alt: (e) => !(e as KeyedEvent).altKey,\n  meta: (e) => !(e as KeyedEvent).metaKey,\n  left: (e) => 'button' in e && (e as MouseEvent).button !== 0,\n  middle: (e) => 'button' in e && (e as MouseEvent).button !== 1,\n  right: (e) => 'button' in e && (e as MouseEvent).button !== 2,\n  exact: (e, modifiers) =>\n    systemModifiers.some((m) => (e as any)[`${m}Key`] && !modifiers[m])\n}\n\nexport const on: Directive = ({ el, get, exp, arg, modifiers }) => {\n  if (!arg) {\n    if (import.meta.env.DEV) {\n      console.error(`petite-vue 不支持 v-on=\"obj\" 语法。`)\n    }\n    return\n  }\n\n  let handler = simplePathRE.test(exp)\n    ? get(`(e => ${exp}(e))`)\n    : get(`($event => { ${exp} })`)\n\n  // 特殊的生命周期事件\n  if (import.meta.env.DEV && (arg === 'mounted' || arg === 'unmounted')) {\n    console.error(\n      `mounted 和 unmounted 钩子现在需要添加 vue: 前缀：` +\n        `- 请使用 @vue:${arg}=\"handler\" 替代。`\n    )\n  }\n  if (arg === 'vue:mounted') {\n    nextTick(handler)\n    return\n  } else if (arg === 'vue:unmounted') {\n    return () => handler()\n  }\n\n  if (modifiers) {\n    // 映射修饰符\n    if (arg === 'click') {\n      if (modifiers.right) arg = 'contextmenu'\n      if (modifiers.middle) arg = 'mouseup'\n    }\n\n    const raw = handler\n    handler = (e: Event) => {\n      if ('key' in e && !(hyphenate((e as KeyboardEvent).key) in modifiers)) {\n        return\n      }\n      for (const key in modifiers) {\n        const guard = modifierGuards[key]\n        if (guard && guard(e, modifiers)) {\n          return\n        }\n      }\n      return raw(e)\n    }\n  }\n\n  listen(el, arg, handler, modifiers)\n}\n","import { Directive } from '.'\n\nexport const show: Directive<HTMLElement> = ({ el, get, effect }) => {\n  const initialDisplay = el.style.display\n  effect(() => {\n    el.style.display = get() ? initialDisplay : 'none'\n  })\n}\n","import { isObject } from '@vue/shared'\nimport { Directive } from '.'\n\nexport const text: Directive<Text | Element> = ({ el, get, effect }) => {\n  effect(() => {\n    el.textContent = toDisplayString(get())\n  })\n}\n\nexport const toDisplayString = (value: any) =>\n  value == null\n    ? ''\n    : isObject(value)\n    ? JSON.stringify(value, null, 2)\n    : String(value)\n","import { Directive } from '.'\n\nexport const html: Directive = ({ el, get, effect }) => {\n  effect(() => {\n    el.innerHTML = get()\n  })\n}\n","import { isArray, looseEqual, looseIndexOf, toNumber } from '@vue/shared'\r\nimport { Directive } from '.'\r\nimport { listen } from '../utils'\r\n\r\nexport const model: Directive<\r\n  HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement\r\n> = ({ el, exp, get, effect, modifiers }) => {\r\n  const type = el.type\r\n  const assign = get(`(val) => { ${exp} = val }`)\r\n  const { trim, number = type === 'number' } = modifiers || {}\r\n\r\n  if (el.tagName === 'SELECT') {\r\n    const sel = el as HTMLSelectElement\r\n    listen(el, 'change', () => {\r\n      const selectedVal = Array.prototype.filter\r\n        .call(sel.options, (o: HTMLOptionElement) => o.selected)\r\n        .map((o: HTMLOptionElement) =>\r\n          number ? toNumber(getValue(o)) : getValue(o)\r\n        )\r\n      assign(sel.multiple ? selectedVal : selectedVal[0])\r\n    })\r\n    effect(() => {\r\n      const value = get()\r\n      const isMultiple = sel.multiple\r\n      for (let i = 0, l = sel.options.length; i < l; i++) {\r\n        const option = sel.options[i]\r\n        const optionValue = getValue(option)\r\n        if (isMultiple) {\r\n          if (isArray(value)) {\r\n            option.selected = looseIndexOf(value, optionValue) > -1\r\n          } else {\r\n            option.selected = value.has(optionValue)\r\n          }\r\n        } else {\r\n          if (looseEqual(getValue(option), value)) {\r\n            if (sel.selectedIndex !== i) sel.selectedIndex = i\r\n            return\r\n          }\r\n        }\r\n      }\r\n      if (!isMultiple && sel.selectedIndex !== -1) {\r\n        sel.selectedIndex = -1\r\n      }\r\n    })\r\n  } else if (type === 'checkbox') {\r\n    listen(el, 'change', () => {\r\n      const modelValue = get()\r\n      const checked = (el as HTMLInputElement).checked\r\n      if (isArray(modelValue)) {\r\n        const elementValue = getValue(el)\r\n        const index = looseIndexOf(modelValue, elementValue)\r\n        const found = index !== -1\r\n        if (checked && !found) {\r\n          assign(modelValue.concat(elementValue))\r\n        } else if (!checked && found) {\r\n          const filtered = [...modelValue]\r\n          filtered.splice(index, 1)\r\n          assign(filtered)\r\n        }\r\n      } else {\r\n        assign(getCheckboxValue(el as HTMLInputElement, checked))\r\n      }\r\n    })\r\n\r\n    let oldValue: any\r\n    effect(() => {\r\n      const value = get()\r\n      if (isArray(value)) {\r\n        ;(el as HTMLInputElement).checked =\r\n          looseIndexOf(value, getValue(el)) > -1\r\n      } else if (value !== oldValue) {\r\n        ;(el as HTMLInputElement).checked = looseEqual(\r\n          value,\r\n          getCheckboxValue(el as HTMLInputElement, true)\r\n        )\r\n      }\r\n      oldValue = value\r\n    })\r\n  } else if (type === 'radio') {\r\n    listen(el, 'change', () => {\r\n      assign(getValue(el))\r\n    })\r\n    let oldValue: any\r\n    effect(() => {\r\n      const value = get()\r\n      if (value !== oldValue) {\r\n        ;(el as HTMLInputElement).checked = looseEqual(value, getValue(el))\r\n      }\r\n    })\r\n  } else {\r\n    // 文本类型输入\r\n    const resolveValue = (val: string) => {\r\n      if (trim) return val.trim()\r\n      if (number) return toNumber(val)\r\n      return val\r\n    }\r\n\r\n    listen(el, 'compositionstart', onCompositionStart)\r\n    listen(el, 'compositionend', onCompositionEnd)\r\n    listen(el, modifiers?.lazy ? 'change' : 'input', () => {\r\n      if ((el as any).composing) return\r\n      assign(resolveValue(el.value))\r\n    })\r\n    if (trim) {\r\n      listen(el, 'change', () => {\r\n        el.value = el.value.trim()\r\n      })\r\n    }\r\n\r\n    effect(() => {\r\n      if ((el as any).composing) {\r\n        return\r\n      }\r\n      const curVal = el.value\r\n      const newVal = get()\r\n      if (document.activeElement === el && resolveValue(curVal) === newVal) {\r\n        return\r\n      }\r\n      if (curVal !== newVal) {\r\n        el.value = newVal\r\n      }\r\n    })\r\n  }\r\n}\r\n\r\nconst getValue = (el: any) => ('_value' in el ? el._value : el.value)\r\n\r\n// 获取通过 :true-value 或 :false-value 绑定设置的原始值\r\nconst getCheckboxValue = (\r\n  el: HTMLInputElement & { _trueValue?: any; _falseValue?: any },\r\n  checked: boolean\r\n) => {\r\n  const key = checked ? '_trueValue' : '_falseValue'\r\n  return key in el ? el[key] : checked\r\n}\r\n\r\nconst onCompositionStart = (e: Event) => {\r\n  ;(e.target as any).composing = true\r\n}\r\n\r\nconst onCompositionEnd = (e: Event) => {\r\n  const target = e.target as any\r\n  if (target.composing) {\r\n    target.composing = false\r\n    trigger(target, 'input')\r\n  }\r\n}\r\n\r\nconst trigger = (el: HTMLElement, type: string) => {\r\n  const e = document.createEvent('HTMLEvents')\r\n  e.initEvent(type, true, true)\r\n  el.dispatchEvent(e)\r\n}\r\n","const evalCache: Record<string, Function> = Object.create(null)\r\n\r\nexport const evaluate = (scope: any, exp: string, el?: Node) =>\r\n  execute(scope, `return(${exp})`, el)\r\n\r\nexport const execute = (scope: any, exp: string, el?: Node) => {\r\n  const fn = evalCache[exp] || (evalCache[exp] = toFunction(exp))\r\n  try {\r\n    return fn(scope, el)\r\n  } catch (e) {\r\n    if (import.meta.env.DEV) {\r\n      console.warn(`计算表达式 \"${exp}\" 时出错：`)\r\n    }\r\n    console.error(e)\r\n  }\r\n}\r\n\r\nconst toFunction = (exp: string): Function => {\r\n  try {\r\n    return new Function(`$data`, `$el`, `with($data){${exp}}`)\r\n  } catch (e) {\r\n    console.error(`表达式 ${exp} 中出错：${(e as Error).message}`)\r\n    return () => {}\r\n  }\r\n}\r\n","import { Directive } from '.'\nimport { execute } from '../eval'\nimport { nextTick } from '../scheduler'\n\nexport const effect: Directive = ({ el, ctx, exp, effect }) => {\n  nextTick(() => effect(() => execute(ctx.scope, exp, el)))\n}\n","import { Context } from '../context'\nimport { effect as rawEffect } from '@vue/reactivity'\nimport { bind } from './bind'\nimport { on } from './on'\nimport { show } from './show'\nimport { text } from './text'\nimport { html } from './html'\nimport { model } from './model'\nimport { effect } from './effect'\n\nexport interface Directive<T = Element> {\n  (ctx: DirectiveContext<T>): (() => void) | void\n}\n\nexport interface DirectiveContext<T = Element> {\n  el: T\n  get: (exp?: string) => any\n  effect: typeof rawEffect\n  exp: string\n  arg?: string\n  modifiers?: Record<string, true>\n  ctx: Context\n}\n\nexport const builtInDirectives: Record<string, Directive<any>> = {\n  bind,\n  on,\n  show,\n  text,\n  html,\n  model,\n  effect\n}\n","import { Block } from '../block'\nimport { evaluate } from '../eval'\nimport { checkAttr } from '../utils'\nimport { Context } from '../context'\n\ninterface Branch {\n  exp?: string | null\n  el: Element\n}\n\nexport const _if = (el: Element, exp: string, ctx: Context) => {\n  if (import.meta.env.DEV && !exp.trim()) {\n    console.warn(`v-if 表达式不能为空。`)\n  }\n\n  const parent = el.parentElement!\n  const anchor = new Comment('v-if')\n  parent.insertBefore(anchor, el)\n\n  const branches: Branch[] = [\n    {\n      exp,\n      el\n    }\n  ]\n\n  // 定位 else 分支\n  let elseEl: Element | null\n  let elseExp: string | null\n  while ((elseEl = el.nextElementSibling)) {\n    elseExp = null\n    if (\n      checkAttr(elseEl, 'v-else') === '' ||\n      (elseExp = checkAttr(elseEl, 'v-else-if'))\n    ) {\n      parent.removeChild(elseEl)\n      branches.push({ exp: elseExp, el: elseEl })\n    } else {\n      break\n    }\n  }\n\n  const nextNode = el.nextSibling\n  parent.removeChild(el)\n\n  let block: Block | undefined\n  let activeBranchIndex: number = -1\n\n  const removeActiveBlock = () => {\n    if (block) {\n      parent.insertBefore(anchor, block.el)\n      block.remove()\n      block = undefined\n    }\n  }\n\n  ctx.effect(() => {\n    for (let i = 0; i < branches.length; i++) {\n      const { exp, el } = branches[i]\n      if (!exp || evaluate(ctx.scope, exp)) {\n        if (i !== activeBranchIndex) {\n          removeActiveBlock()\n          block = new Block(el, ctx)\n          block.insert(parent, anchor)\n          parent.removeChild(anchor)\n          activeBranchIndex = i\n        }\n        return\n      }\n    }\n    // 没有匹配的分支\n    activeBranchIndex = -1\n    removeActiveBlock()\n  })\n\n  return nextNode\n}\n","import { isArray, isObject } from '@vue/shared'\r\nimport { Block } from '../block'\r\nimport { evaluate } from '../eval'\r\nimport { Context, createScopedContext } from '../context'\r\n\r\nconst forAliasRE = /([\\s\\S]*?)\\s+(?:in|of)\\s+([\\s\\S]*)/\r\nconst forIteratorRE = /,([^,\\}\\]]*)(?:,([^,\\}\\]]*))?$/\r\nconst stripParensRE = /^\\(|\\)$/g\r\nconst destructureRE = /^[{[]\\s*((?:[\\w_$]+\\s*,?\\s*)+)[\\]}]$/\r\n\r\ntype KeyToIndexMap = Map<any, number>\r\n\r\nexport const _for = (el: Element, exp: string, ctx: Context) => {\r\n  const inMatch = exp.match(forAliasRE)\r\n  if (!inMatch) {\r\n    import.meta.env.DEV && console.warn(`无效的 v-for 表达式：${exp}`)\r\n    return\r\n  }\r\n\r\n  const nextNode = el.nextSibling\r\n\r\n  const parent = el.parentElement!\r\n  const anchor = new Text('')\r\n  parent.insertBefore(anchor, el)\r\n  parent.removeChild(el)\r\n\r\n  const sourceExp = inMatch[2].trim()\r\n  let valueExp = inMatch[1].trim().replace(stripParensRE, '').trim()\r\n  let destructureBindings: string[] | undefined\r\n  let isArrayDestructure = false\r\n  let indexExp: string | undefined\r\n  let objIndexExp: string | undefined\r\n\r\n  let keyAttr = 'key'\r\n  let keyExp =\r\n    el.getAttribute(keyAttr) ||\r\n    el.getAttribute((keyAttr = ':key')) ||\r\n    el.getAttribute((keyAttr = 'v-bind:key'))\r\n  if (keyExp) {\r\n    el.removeAttribute(keyAttr)\r\n    if (keyAttr === 'key') keyExp = JSON.stringify(keyExp)\r\n  }\r\n\r\n  let match\r\n  if ((match = valueExp.match(forIteratorRE))) {\r\n    valueExp = valueExp.replace(forIteratorRE, '').trim()\r\n    indexExp = match[1].trim()\r\n    if (match[2]) {\r\n      objIndexExp = match[2].trim()\r\n    }\r\n  }\r\n\r\n  if ((match = valueExp.match(destructureRE))) {\r\n    destructureBindings = match[1].split(',').map((s) => s.trim())\r\n    isArrayDestructure = valueExp[0] === '['\r\n  }\r\n\r\n  let mounted = false\r\n  let blocks: Block[]\r\n  let childCtxs: Context[]\r\n  let keyToIndexMap: Map<any, number>\r\n\r\n  const createChildContexts = (source: unknown): [Context[], KeyToIndexMap] => {\r\n    const map: KeyToIndexMap = new Map()\r\n    const ctxs: Context[] = []\r\n\r\n    if (isArray(source)) {\r\n      for (let i = 0; i < source.length; i++) {\r\n        ctxs.push(createChildContext(map, source[i], i))\r\n      }\r\n    } else if (typeof source === 'number') {\r\n      for (let i = 0; i < source; i++) {\r\n        ctxs.push(createChildContext(map, i + 1, i))\r\n      }\r\n    } else if (isObject(source)) {\r\n      let i = 0\r\n      for (const key in source) {\r\n        ctxs.push(createChildContext(map, source[key], i++, key))\r\n      }\r\n    }\r\n\r\n    return [ctxs, map]\r\n  }\r\n\r\n  const createChildContext = (\r\n    map: KeyToIndexMap,\r\n    value: any,\r\n    index: number,\r\n    objKey?: string\r\n  ): Context => {\r\n    const data: any = {}\r\n    if (destructureBindings) {\r\n      destructureBindings.forEach(\r\n        (b, i) => (data[b] = value[isArrayDestructure ? i : b])\r\n      )\r\n    } else {\r\n      data[valueExp] = value\r\n    }\r\n    if (objKey) {\r\n      indexExp && (data[indexExp] = objKey)\r\n      objIndexExp && (data[objIndexExp] = index)\r\n    } else {\r\n      indexExp && (data[indexExp] = index)\r\n    }\r\n    const childCtx = createScopedContext(ctx, data)\r\n    const key = keyExp ? evaluate(childCtx.scope, keyExp) : index\r\n    map.set(key, index)\r\n    childCtx.key = key\r\n    return childCtx\r\n  }\r\n\r\n  const mountBlock = (ctx: Context, ref: Node) => {\r\n    const block = new Block(el, ctx)\r\n    block.key = ctx.key\r\n    block.insert(parent, ref)\r\n    return block\r\n  }\r\n\r\n  ctx.effect(() => {\r\n    const source = evaluate(ctx.scope, sourceExp)\r\n    const prevKeyToIndexMap = keyToIndexMap\r\n    ;[childCtxs, keyToIndexMap] = createChildContexts(source)\r\n    if (!mounted) {\r\n      blocks = childCtxs.map((s) => mountBlock(s, anchor))\r\n      mounted = true\r\n    } else {\r\n      for (let i = 0; i < blocks.length; i++) {\r\n        if (!keyToIndexMap.has(blocks[i].key)) {\r\n          blocks[i].remove()\r\n        }\r\n      }\r\n      \r\n      const nextBlocks: Block[] = []\r\n      let i = childCtxs.length\r\n      let nextBlock: Block | undefined\r\n      let prevMovedBlock: Block | undefined\r\n      while (i--) {\r\n        const childCtx = childCtxs[i]\r\n        const oldIndex = prevKeyToIndexMap.get(childCtx.key)\r\n        let block\r\n        if (oldIndex == null) {\r\n          // 新增\r\n          block = mountBlock(\r\n            childCtx,\r\n            nextBlock ? nextBlock.el : anchor\r\n          )\r\n        } else {\r\n          // 更新\r\n          block = blocks[oldIndex]\r\n          Object.assign(block.ctx.scope, childCtx.scope)\r\n          if (oldIndex !== i) {\r\n            // 移动\r\n            if (\r\n              blocks[oldIndex + 1] !== nextBlock || \r\n              // 如果下一个已经移动，这个也必须移动\r\n              prevMovedBlock === nextBlock\r\n            ) {\r\n              prevMovedBlock = block\r\n              block.insert(parent, nextBlock ? nextBlock.el : anchor)\r\n            }\r\n          }\r\n        }\r\n        nextBlocks.unshift(nextBlock = block)\r\n      }\r\n      blocks = nextBlocks\r\n    }\r\n  })\r\n\r\n  return nextNode\r\n}\r\n","import { Directive } from '.'\r\n\r\nexport const ref: Directive = ({\r\n  el,\r\n  ctx: {\r\n    scope: { $refs }\r\n  },\r\n  get,\r\n  effect\r\n}) => {\r\n  let prevRef: any\r\n  effect(() => {\r\n    const ref = get()\r\n    $refs[ref] = el\r\n    if (prevRef && ref !== prevRef) {\r\n      delete $refs[prevRef]\r\n    }\r\n    prevRef = ref\r\n  })\r\n  return () => {\r\n    prevRef && delete $refs[prevRef]\r\n  }\r\n}\r\n","import { builtInDirectives, Directive } from './directives'\r\nimport { _if } from './directives/if'\r\nimport { _for } from './directives/for'\r\nimport { bind } from './directives/bind'\r\nimport { on } from './directives/on'\r\nimport { text } from './directives/text'\r\nimport { evaluate } from './eval'\r\nimport { checkAttr } from './utils'\r\nimport { ref } from './directives/ref'\r\nimport { Context, createScopedContext } from './context'\r\n\r\nconst dirRE = /^(?:v-|:|@)/\r\nconst modifierRE = /\\.([\\w-]+)/g\r\n\r\nexport let inOnce = false\r\n\r\nexport const walk = (node: Node, ctx: Context): ChildNode | null | void => {\r\n  const type = node.nodeType\r\n  if (type === 1) {\r\n    // 元素节点\r\n    const el = node as Element\r\n    if (el.hasAttribute('v-pre')) {\r\n      return\r\n    }\r\n\r\n    checkAttr(el, 'v-cloak')\r\n\r\n    let exp: string | null\r\n\r\n    // v-if\r\n    if ((exp = checkAttr(el, 'v-if'))) {\r\n      return _if(el, exp, ctx)\r\n    }\r\n\r\n    // v-for\r\n    if ((exp = checkAttr(el, 'v-for'))) {\r\n      return _for(el, exp, ctx)\r\n    }\r\n\r\n    // v-scope\r\n    if ((exp = checkAttr(el, 'v-scope')) || exp === '') {\r\n      const scope = exp ? evaluate(ctx.scope, exp) : {}\r\n      ctx = createScopedContext(ctx, scope)\r\n      if (scope.$template) {\r\n        resolveTemplate(el, scope.$template)\r\n      }\r\n    }\r\n\r\n    // v-once\r\n    const hasVOnce = checkAttr(el, 'v-once') != null\r\n    if (hasVOnce) {\r\n      inOnce = true\r\n    }\r\n\r\n    // ref\r\n    if ((exp = checkAttr(el, 'ref'))) {\r\n      applyDirective(el, ref, `\"${exp}\"`, ctx)\r\n    }\r\n\r\n    // 先处理子节点，再处理自身属性\r\n    walkChildren(el, ctx)\r\n\r\n    // 其他指令\r\n    const deferred: [string, string][] = []\r\n    for (const { name, value } of [...el.attributes]) {\r\n      if (dirRE.test(name) && name !== 'v-cloak') {\r\n        if (name === 'v-model') {\r\n          // 延迟处理 v-model，因为它依赖于 :value 绑定先被处理\r\n          // 但要在 v-on 监听器之前处理 (#73)\r\n          deferred.unshift([name, value])\r\n        } else if (name[0] === '@' || /^v-on\\b/.test(name)) {\r\n          deferred.push([name, value])\r\n        } else {\r\n          processDirective(el, name, value, ctx)\r\n        }\r\n      }\r\n    }\r\n    for (const [name, value] of deferred) {\r\n      processDirective(el, name, value, ctx)\r\n    }\r\n\r\n    if (hasVOnce) {\r\n      inOnce = false\r\n    }\r\n  } else if (type === 3) {\r\n    // 文本节点\r\n    const data = (node as Text).data\r\n    if (data.includes(ctx.delimiters[0])) {\r\n      let segments: string[] = []\r\n      let lastIndex = 0\r\n      let match\r\n      while ((match = ctx.delimitersRE.exec(data))) {\r\n        const leading = data.slice(lastIndex, match.index)\r\n        if (leading) segments.push(JSON.stringify(leading))\r\n        segments.push(`$s(${match[1]})`)\r\n        lastIndex = match.index + match[0].length\r\n      }\r\n      if (lastIndex < data.length) {\r\n        segments.push(JSON.stringify(data.slice(lastIndex)))\r\n      }\r\n      applyDirective(node, text, segments.join('+'), ctx)\r\n    }\r\n  } else if (type === 11) {\r\n    walkChildren(node as DocumentFragment, ctx)\r\n  }\r\n}\r\n\r\nconst walkChildren = (node: Element | DocumentFragment, ctx: Context) => {\r\n  let child = node.firstChild\r\n  while (child) {\r\n    child = walk(child, ctx) || child.nextSibling\r\n  }\r\n}\r\n\r\nconst processDirective = (\r\n  el: Element,\r\n  raw: string,\r\n  exp: string,\r\n  ctx: Context\r\n) => {\r\n  let dir: Directive\r\n  let arg: string | undefined\r\n  let modifiers: Record<string, true> | undefined\r\n\r\n  // 修饰符\r\n  raw = raw.replace(modifierRE, (_, m) => {\r\n    ;(modifiers || (modifiers = {}))[m] = true\r\n    return ''\r\n  })\r\n\r\n  if (raw[0] === ':') {\r\n    dir = bind\r\n    arg = raw.slice(1)\r\n  } else if (raw[0] === '@') {\r\n    dir = on\r\n    arg = raw.slice(1)\r\n  } else {\r\n    const argIndex = raw.indexOf(':')\r\n    const dirName = argIndex > 0 ? raw.slice(2, argIndex) : raw.slice(2)\r\n    dir = builtInDirectives[dirName] || ctx.dirs[dirName]\r\n    arg = argIndex > 0 ? raw.slice(argIndex + 1) : undefined\r\n  }\r\n  if (dir) {\r\n    if (dir === bind && arg === 'ref') dir = ref\r\n    applyDirective(el, dir, exp, ctx, arg, modifiers)\r\n    el.removeAttribute(raw)\r\n  } else if (import.meta.env.DEV) {\r\n    console.error(`未知的自定义指令 ${raw}。`)\r\n  }\r\n}\r\n\r\nconst applyDirective = (\r\n  el: Node,\r\n  dir: Directive<any>,\r\n  exp: string,\r\n  ctx: Context,\r\n  arg?: string,\r\n  modifiers?: Record<string, true>\r\n) => {\r\n  const get = (e = exp) => evaluate(ctx.scope, e, el)\r\n  const cleanup = dir({\r\n    el,\r\n    get,\r\n    effect: ctx.effect,\r\n    ctx,\r\n    exp,\r\n    arg,\r\n    modifiers\r\n  })\r\n  if (cleanup) {\r\n    ctx.cleanups.push(cleanup)\r\n  }\r\n}\r\n\r\nconst resolveTemplate = (el: Element, template: string) => {\r\n  if (template[0] === '#') {\r\n    const templateEl = document.querySelector(template)\r\n    if (import.meta.env.DEV && !templateEl) {\r\n      console.error(\r\n        `模板选择器 ${template} 没有匹配的 <template> 元素。`\r\n      )\r\n    }\r\n    el.appendChild((templateEl as HTMLTemplateElement).content.cloneNode(true))\r\n    return\r\n  }\r\n  el.innerHTML = template\r\n}\r\n","import {\r\n  effect as rawEffect,\r\n  reactive,\r\n  ReactiveEffectRunner\r\n} from '@vue/reactivity'\r\nimport { Block } from './block'\r\nimport { Directive } from './directives'\r\nimport { queueJob } from './scheduler'\r\nimport { inOnce } from './walk'\r\nexport interface Context {\r\n  key?: any\r\n  scope: Record<string, any>\r\n  dirs: Record<string, Directive>\r\n  blocks: Block[]\r\n  effect: typeof rawEffect\r\n  effects: ReactiveEffectRunner[]\r\n  cleanups: (() => void)[]\r\n  delimiters: [string, string]\r\n  delimitersRE: RegExp\r\n}\r\n\r\nexport const createContext = (parent?: Context): Context => {\r\n  const ctx: Context = {\r\n    delimiters: ['{{', '}}'],\r\n    delimitersRE: /\\{\\{([^]+?)\\}\\}/g,\r\n    ...parent,\r\n    scope: parent ? parent.scope : reactive({}),\r\n    dirs: parent ? parent.dirs : {},\r\n    effects: [],\r\n    blocks: [],\r\n    cleanups: [],\r\n    effect: (fn) => {\r\n      if (inOnce) {\r\n        queueJob(fn)\r\n        return fn as any\r\n      }\r\n      const e: ReactiveEffectRunner = rawEffect(fn, {\r\n        scheduler: () => queueJob(e)\r\n      })\r\n      ctx.effects.push(e)\r\n      return e\r\n    }\r\n  }\r\n  return ctx\r\n}\r\n\r\nexport const createScopedContext = (ctx: Context, data = {}): Context => {\r\n  const parentScope = ctx.scope\r\n  const mergedScope = Object.create(parentScope)\r\n  Object.defineProperties(mergedScope, Object.getOwnPropertyDescriptors(data))\r\n  mergedScope.$refs = Object.create(parentScope.$refs)\r\n  const reactiveProxy = reactive(\r\n    new Proxy(mergedScope, {\r\n      set(target, key, val, receiver) {\r\n        // 当设置一个在当前作用域中不存在的属性时，\r\n        // 不要在当前作用域中创建它，而是回退到父作用域。\r\n        if (receiver === reactiveProxy && !target.hasOwnProperty(key)) {\r\n          return Reflect.set(parentScope, key, val)\r\n        }\r\n        return Reflect.set(target, key, val, receiver)\r\n      }\r\n    })\r\n  )\r\n\r\n  bindContextMethods(reactiveProxy)\r\n  return {\r\n    ...ctx,\r\n    scope: reactiveProxy\r\n  }\r\n}\r\n\r\nexport const bindContextMethods = (scope: Record<string, any>) => {\r\n  for (const key of Object.keys(scope)) {\r\n    if (typeof scope[key] === 'function') {\r\n      scope[key] = scope[key].bind(scope)\r\n    }\r\n  }\r\n}\r\n","import { Context, createContext } from './context'\r\nimport { walk } from './walk'\r\nimport { remove } from '@vue/shared'\r\nimport { stop } from '@vue/reactivity'\r\n\r\nexport class Block {\r\n  template: Element | DocumentFragment\r\n  ctx: Context\r\n  key?: any\r\n  parentCtx?: Context\r\n\r\n  isFragment: boolean\r\n  start?: Text\r\n  end?: Text\r\n\r\n  get el() {\r\n    return this.start || (this.template as Element)\r\n  }\r\n\r\n  constructor(template: Element, parentCtx: Context, isRoot = false) {\r\n    this.isFragment = template instanceof HTMLTemplateElement\r\n\r\n    if (isRoot) {\r\n      this.template = template\r\n    } else if (this.isFragment) {\r\n      this.template = (template as HTMLTemplateElement).content.cloneNode(\r\n        true\r\n      ) as DocumentFragment\r\n    } else {\r\n      this.template = template.cloneNode(true) as Element\r\n    }\r\n\r\n    if (isRoot) {\r\n      this.ctx = parentCtx\r\n    } else {\r\n      // 创建子上下文\r\n      this.parentCtx = parentCtx\r\n      parentCtx.blocks.push(this)\r\n      this.ctx = createContext(parentCtx)\r\n    }\r\n\r\n    walk(this.template, this.ctx)\r\n  }\r\n\r\n  insert(parent: Element, anchor: Node | null = null) {\r\n    if (this.isFragment) {\r\n      if (this.start) {\r\n        // 已经插入，正在移动\r\n        let node: Node | null = this.start\r\n        let next: Node | null\r\n        while (node) {\r\n          next = node.nextSibling\r\n          parent.insertBefore(node, anchor)\r\n          if (node === this.end) break\r\n          node = next\r\n        }\r\n      } else {\r\n        this.start = new Text('')\r\n        this.end = new Text('')\r\n        parent.insertBefore(this.end, anchor)\r\n        parent.insertBefore(this.start, this.end)\r\n        parent.insertBefore(this.template, this.end)\r\n      }\r\n    } else {\r\n      parent.insertBefore(this.template, anchor)\r\n    }\r\n  }\r\n\r\n  remove() {\r\n    if (this.parentCtx) {\r\n      remove(this.parentCtx.blocks, this)\r\n    }\r\n    if (this.start) {\r\n      const parent = this.start.parentNode!\r\n      let node: Node | null = this.start\r\n      let next: Node | null\r\n      while (node) {\r\n        next = node.nextSibling\r\n        parent.removeChild(node)\r\n        if (node === this.end) break\r\n        node = next\r\n      }\r\n    } else {\r\n      this.template.parentNode!.removeChild(this.template)\r\n    }\r\n    this.teardown()\r\n  }\r\n\r\n  teardown() {\r\n    this.ctx.blocks.forEach((child) => {\r\n      child.teardown()\r\n    })\r\n    this.ctx.effects.forEach(stop)\r\n    this.ctx.cleanups.forEach((fn) => fn())\r\n  }\r\n}\r\n","import { reactive } from '@vue/reactivity' // 响应式\r\nimport { Block } from './block' // 块级作用域\r\nimport { Directive } from './directives' // 指令\r\nimport { bindContextMethods, createContext } from './context' // 上下文\r\nimport { toDisplayString } from './directives/text' // 文本指令\r\nimport { nextTick } from './scheduler' // 调度器\r\n\r\nconst escapeRegex = (str: string) =>\r\n  str.replace(/[-.*+?^${}()|[\\]\\/\\\\]/g, '\\\\$&')\r\n\r\nexport const createApp = (initialData?: any) => {\r\n  // 根上下文\r\n  const ctx = createContext()\r\n  if (initialData) {\r\n    ctx.scope = reactive(initialData)\r\n    bindContextMethods(ctx.scope)\r\n\r\n    // 处理自定义分隔符\r\n    if (initialData.$delimiters) {\r\n      const [open, close] = (ctx.delimiters = initialData.$delimiters)\r\n      ctx.delimitersRE = new RegExp(\r\n        escapeRegex(open) + '([^]+?)' + escapeRegex(close),\r\n        'g'\r\n      )\r\n    }\r\n  }\r\n\r\n  // 全局内部辅助函数\r\n  ctx.scope.$s = toDisplayString  // 将表达式转换为字符串\r\n  ctx.scope.$nextTick = nextTick  // 调度器\r\n  ctx.scope.$refs = Object.create(null)  // 创建一个空对象\r\n\r\n  let rootBlocks: Block[]   // 根块\r\n\r\n  return {\r\n    directive(name: string, def?: Directive) {\r\n      if (def) {\r\n        ctx.dirs[name] = def\r\n        return this\r\n      } else {\r\n        return ctx.dirs[name]\r\n      }\r\n    },\r\n\r\n    mount(el?: string | Element | null) {\r\n      if (typeof el === 'string') {\r\n        el = document.querySelector(el)\r\n        if (!el) {\r\n          import.meta.env.DEV &&\r\n            console.error(`选择器 ${el} 没有匹配的元素。`)\r\n          return\r\n        }\r\n      }\r\n\r\n      el = el || document.documentElement\r\n      let roots: Element[]\r\n      if (el.hasAttribute('v-scope')) {\r\n        roots = [el]\r\n      } else {\r\n        // 只匹配顶层的 v-scope 元素\r\n        roots = [...el.querySelectorAll(`[v-scope]`)].filter(\r\n          (root) => !root.matches(`[v-scope] [v-scope]`)\r\n        )\r\n      }\r\n      // 如果没有任何根元素，则使用整个文档\r\n      if (!roots.length) {\r\n        roots = [el]\r\n      }\r\n\r\n      if (\r\n        import.meta.env.DEV &&\r\n        roots.length === 1 &&\r\n        roots[0] === document.documentElement\r\n      ) {\r\n        console.warn(\r\n          `挂载在 documentElement 上 - 这不是最优的，因为 Mist.js ` +\r\n            `将被迫遍历整个页面的 DOM。` +\r\n            `考虑使用 \\`v-scope\\` 明确标记由 Mist.js 控制的元素。`\r\n        )\r\n      }\r\n\r\n      // 创建根块\r\n      rootBlocks = roots.map((el) => new Block(el, ctx, true))\r\n      return this\r\n    },\r\n\r\n    unmount() {\r\n      rootBlocks.forEach((block) => block.teardown())\r\n    }\r\n  }\r\n}\r\n","export { createApp } from './app'\nexport { nextTick } from './scheduler'\nexport { reactive } from '@vue/reactivity'\n\nimport { createApp } from './app'\n\nconst s = document.currentScript\nif (s && s.hasAttribute('init')) {\n  createApp().mount()\n}\n"],"names":["makeMap","str","expectsLowerCase","map","list","i","val","normalizeStyle","value","isArray","res","item","normalized","isString","parseStringStyle","key","isObject","listDelimiterRE","propertyDelimiterRE","styleCommentRE","cssText","ret","tmp","normalizeClass","name","looseCompareArrays","a","b","equal","looseEqual","aValidType","isDate","bValidType","isSymbol","aKeysCount","bKeysCount","aHasKey","bHasKey","looseIndexOf","arr","extend","remove","el","hasOwnProperty","hasOwn","isMap","toTypeString","objectToString","toRawType","isIntegerKey","cacheStringFunction","fn","cache","camelizeRE","camelize","_","c","hyphenateRE","hyphenate","hasChanged","oldValue","toNumber","n","queued","queue","p","nextTick","queueJob","job","flushJobs","forceAttrRE","bind","get","effect","arg","modifiers","prevValue","setProp","style","setStyle","importantRE","v","checkAttr","listen","event","handler","options","simplePathRE","systemModifiers","modifierGuards","m","on","exp","raw","e","guard","show","initialDisplay","text","toDisplayString","html","model","type","assign","trim","number","sel","selectedVal","o","getValue","isMultiple","l","option","optionValue","modelValue","checked","elementValue","index","found","filtered","getCheckboxValue","resolveValue","onCompositionStart","onCompositionEnd","curVal","newVal","target","trigger","evalCache","evaluate","scope","execute","toFunction","ctx","builtInDirectives","_if","parent","anchor","branches","elseEl","elseExp","nextNode","block","activeBranchIndex","removeActiveBlock","Block","forAliasRE","forIteratorRE","stripParensRE","destructureRE","_for","inMatch","sourceExp","valueExp","destructureBindings","isArrayDestructure","indexExp","objIndexExp","keyAttr","keyExp","match","s","mounted","blocks","childCtxs","keyToIndexMap","createChildContexts","source","ctxs","createChildContext","objKey","data","childCtx","createScopedContext","mountBlock","ref","prevKeyToIndexMap","nextBlocks","nextBlock","prevMovedBlock","oldIndex","$refs","prevRef","dirRE","modifierRE","inOnce","walk","node","resolveTemplate","hasVOnce","applyDirective","walkChildren","deferred","processDirective","segments","lastIndex","leading","child","dir","argIndex","dirName","cleanup","template","templateEl","createContext","reactive","rawEffect","parentScope","mergedScope","reactiveProxy","receiver","bindContextMethods","parentCtx","isRoot","next","stop","escapeRegex","createApp","initialData","open","close","rootBlocks","def","roots","root"],"mappings":"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"}