{"version":3,"file":"mist.umd.js","sources":["../node_modules/.pnpm/@vue+shared@3.2.45/node_modules/@vue/shared/dist/shared.esm-bundler.js","../src/scheduler.ts","../src/directives/bind.ts","../src/utils.ts","../src/directives/on.ts","../src/directives/text.ts","../src/directives/model.ts","../src/eval.ts","../src/directives/index.ts","../src/directives/show.ts","../src/directives/html.ts","../src/directives/effect.ts","../src/directives/for.ts","../src/directives/ref.ts","../src/walk.ts","../src/directives/if.ts","../src/context.ts","../src/block.ts","../src/app.ts","../src/index.ts"],"sourcesContent":["/**\n * Make a map and return a function for checking if a key\n * is in that map.\n * IMPORTANT: all calls of this function must be prefixed with\n * \\/\\*#\\_\\_PURE\\_\\_\\*\\/\n * So that rollup can tree-shake them if necessary.\n */\nfunction makeMap(str, expectsLowerCase) {\n    const map = Object.create(null);\n    const list = str.split(',');\n    for (let i = 0; i < list.length; i++) {\n        map[list[i]] = true;\n    }\n    return expectsLowerCase ? val => !!map[val.toLowerCase()] : val => !!map[val];\n}\n\n/**\n * dev only flag -> name mapping\n */\nconst PatchFlagNames = {\n    [1 /* PatchFlags.TEXT */]: `TEXT`,\n    [2 /* PatchFlags.CLASS */]: `CLASS`,\n    [4 /* PatchFlags.STYLE */]: `STYLE`,\n    [8 /* PatchFlags.PROPS */]: `PROPS`,\n    [16 /* PatchFlags.FULL_PROPS */]: `FULL_PROPS`,\n    [32 /* PatchFlags.HYDRATE_EVENTS */]: `HYDRATE_EVENTS`,\n    [64 /* PatchFlags.STABLE_FRAGMENT */]: `STABLE_FRAGMENT`,\n    [128 /* PatchFlags.KEYED_FRAGMENT */]: `KEYED_FRAGMENT`,\n    [256 /* PatchFlags.UNKEYED_FRAGMENT */]: `UNKEYED_FRAGMENT`,\n    [512 /* PatchFlags.NEED_PATCH */]: `NEED_PATCH`,\n    [1024 /* PatchFlags.DYNAMIC_SLOTS */]: `DYNAMIC_SLOTS`,\n    [2048 /* PatchFlags.DEV_ROOT_FRAGMENT */]: `DEV_ROOT_FRAGMENT`,\n    [-1 /* PatchFlags.HOISTED */]: `HOISTED`,\n    [-2 /* PatchFlags.BAIL */]: `BAIL`\n};\n\n/**\n * Dev only\n */\nconst slotFlagsText = {\n    [1 /* SlotFlags.STABLE */]: 'STABLE',\n    [2 /* SlotFlags.DYNAMIC */]: 'DYNAMIC',\n    [3 /* SlotFlags.FORWARDED */]: 'FORWARDED'\n};\n\nconst GLOBALS_WHITE_LISTED = 'Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,' +\n    'decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,' +\n    'Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt';\nconst isGloballyWhitelisted = /*#__PURE__*/ makeMap(GLOBALS_WHITE_LISTED);\n\nconst range = 2;\nfunction generateCodeFrame(source, start = 0, end = source.length) {\n    // Split the content into individual lines but capture the newline sequence\n    // that separated each line. This is important because the actual sequence is\n    // needed to properly take into account the full line length for offset\n    // comparison\n    let lines = source.split(/(\\r?\\n)/);\n    // Separate the lines and newline sequences into separate arrays for easier referencing\n    const newlineSequences = lines.filter((_, idx) => idx % 2 === 1);\n    lines = lines.filter((_, idx) => idx % 2 === 0);\n    let count = 0;\n    const res = [];\n    for (let i = 0; i < lines.length; i++) {\n        count +=\n            lines[i].length +\n                ((newlineSequences[i] && newlineSequences[i].length) || 0);\n        if (count >= start) {\n            for (let j = i - range; j <= i + range || end > count; j++) {\n                if (j < 0 || j >= lines.length)\n                    continue;\n                const line = j + 1;\n                res.push(`${line}${' '.repeat(Math.max(3 - String(line).length, 0))}|  ${lines[j]}`);\n                const lineLength = lines[j].length;\n                const newLineSeqLength = (newlineSequences[j] && newlineSequences[j].length) || 0;\n                if (j === i) {\n                    // push underline\n                    const pad = start - (count - (lineLength + newLineSeqLength));\n                    const length = Math.max(1, end > count ? lineLength - pad : end - start);\n                    res.push(`   |  ` + ' '.repeat(pad) + '^'.repeat(length));\n                }\n                else if (j > i) {\n                    if (end > count) {\n                        const length = Math.max(Math.min(end - count, lineLength), 1);\n                        res.push(`   |  ` + '^'.repeat(length));\n                    }\n                    count += lineLength + newLineSeqLength;\n                }\n            }\n            break;\n        }\n    }\n    return res.join('\\n');\n}\n\nfunction normalizeStyle(value) {\n    if (isArray(value)) {\n        const res = {};\n        for (let i = 0; i < value.length; i++) {\n            const item = value[i];\n            const normalized = isString(item)\n                ? parseStringStyle(item)\n                : normalizeStyle(item);\n            if (normalized) {\n                for (const key in normalized) {\n                    res[key] = normalized[key];\n                }\n            }\n        }\n        return res;\n    }\n    else if (isString(value)) {\n        return value;\n    }\n    else if (isObject(value)) {\n        return value;\n    }\n}\nconst listDelimiterRE = /;(?![^(]*\\))/g;\nconst propertyDelimiterRE = /:([^]+)/;\nconst styleCommentRE = /\\/\\*.*?\\*\\//gs;\nfunction parseStringStyle(cssText) {\n    const ret = {};\n    cssText\n        .replace(styleCommentRE, '')\n        .split(listDelimiterRE)\n        .forEach(item => {\n        if (item) {\n            const tmp = item.split(propertyDelimiterRE);\n            tmp.length > 1 && (ret[tmp[0].trim()] = tmp[1].trim());\n        }\n    });\n    return ret;\n}\nfunction stringifyStyle(styles) {\n    let ret = '';\n    if (!styles || isString(styles)) {\n        return ret;\n    }\n    for (const key in styles) {\n        const value = styles[key];\n        const normalizedKey = key.startsWith(`--`) ? key : hyphenate(key);\n        if (isString(value) || typeof value === 'number') {\n            // only render valid values\n            ret += `${normalizedKey}:${value};`;\n        }\n    }\n    return ret;\n}\nfunction normalizeClass(value) {\n    let res = '';\n    if (isString(value)) {\n        res = value;\n    }\n    else if (isArray(value)) {\n        for (let i = 0; i < value.length; i++) {\n            const normalized = normalizeClass(value[i]);\n            if (normalized) {\n                res += normalized + ' ';\n            }\n        }\n    }\n    else if (isObject(value)) {\n        for (const name in value) {\n            if (value[name]) {\n                res += name + ' ';\n            }\n        }\n    }\n    return res.trim();\n}\nfunction normalizeProps(props) {\n    if (!props)\n        return null;\n    let { class: klass, style } = props;\n    if (klass && !isString(klass)) {\n        props.class = normalizeClass(klass);\n    }\n    if (style) {\n        props.style = normalizeStyle(style);\n    }\n    return props;\n}\n\n// These tag configs are shared between compiler-dom and runtime-dom, so they\n// https://developer.mozilla.org/en-US/docs/Web/HTML/Element\nconst HTML_TAGS = 'html,body,base,head,link,meta,style,title,address,article,aside,footer,' +\n    'header,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,' +\n    'figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,' +\n    'data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,' +\n    'time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,' +\n    'canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,' +\n    'th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,' +\n    'option,output,progress,select,textarea,details,dialog,menu,' +\n    'summary,template,blockquote,iframe,tfoot';\n// https://developer.mozilla.org/en-US/docs/Web/SVG/Element\nconst SVG_TAGS = 'svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,' +\n    'defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,' +\n    'feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,' +\n    'feDistanceLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,' +\n    'feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,' +\n    'fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,' +\n    'foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,' +\n    'mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,' +\n    'polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,' +\n    'text,textPath,title,tspan,unknown,use,view';\nconst VOID_TAGS = 'area,base,br,col,embed,hr,img,input,link,meta,param,source,track,wbr';\n/**\n * Compiler only.\n * Do NOT use in runtime code paths unless behind `(process.env.NODE_ENV !== 'production')` flag.\n */\nconst isHTMLTag = /*#__PURE__*/ makeMap(HTML_TAGS);\n/**\n * Compiler only.\n * Do NOT use in runtime code paths unless behind `(process.env.NODE_ENV !== 'production')` flag.\n */\nconst isSVGTag = /*#__PURE__*/ makeMap(SVG_TAGS);\n/**\n * Compiler only.\n * Do NOT use in runtime code paths unless behind `(process.env.NODE_ENV !== 'production')` flag.\n */\nconst isVoidTag = /*#__PURE__*/ makeMap(VOID_TAGS);\n\n/**\n * On the client we only need to offer special cases for boolean attributes that\n * have different names from their corresponding dom properties:\n * - itemscope -> N/A\n * - allowfullscreen -> allowFullscreen\n * - formnovalidate -> formNoValidate\n * - ismap -> isMap\n * - nomodule -> noModule\n * - novalidate -> noValidate\n * - readonly -> readOnly\n */\nconst specialBooleanAttrs = `itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly`;\nconst isSpecialBooleanAttr = /*#__PURE__*/ makeMap(specialBooleanAttrs);\n/**\n * The full list is needed during SSR to produce the correct initial markup.\n */\nconst isBooleanAttr = /*#__PURE__*/ makeMap(specialBooleanAttrs +\n    `,async,autofocus,autoplay,controls,default,defer,disabled,hidden,` +\n    `loop,open,required,reversed,scoped,seamless,` +\n    `checked,muted,multiple,selected`);\n/**\n * Boolean attributes should be included if the value is truthy or ''.\n * e.g. `<select multiple>` compiles to `{ multiple: '' }`\n */\nfunction includeBooleanAttr(value) {\n    return !!value || value === '';\n}\nconst unsafeAttrCharRE = /[>/=\"'\\u0009\\u000a\\u000c\\u0020]/;\nconst attrValidationCache = {};\nfunction isSSRSafeAttrName(name) {\n    if (attrValidationCache.hasOwnProperty(name)) {\n        return attrValidationCache[name];\n    }\n    const isUnsafe = unsafeAttrCharRE.test(name);\n    if (isUnsafe) {\n        console.error(`unsafe attribute name: ${name}`);\n    }\n    return (attrValidationCache[name] = !isUnsafe);\n}\nconst propsToAttrMap = {\n    acceptCharset: 'accept-charset',\n    className: 'class',\n    htmlFor: 'for',\n    httpEquiv: 'http-equiv'\n};\n/**\n * Known attributes, this is used for stringification of runtime static nodes\n * so that we don't stringify bindings that cannot be set from HTML.\n * Don't also forget to allow `data-*` and `aria-*`!\n * Generated from https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes\n */\nconst isKnownHtmlAttr = /*#__PURE__*/ makeMap(`accept,accept-charset,accesskey,action,align,allow,alt,async,` +\n    `autocapitalize,autocomplete,autofocus,autoplay,background,bgcolor,` +\n    `border,buffered,capture,challenge,charset,checked,cite,class,code,` +\n    `codebase,color,cols,colspan,content,contenteditable,contextmenu,controls,` +\n    `coords,crossorigin,csp,data,datetime,decoding,default,defer,dir,dirname,` +\n    `disabled,download,draggable,dropzone,enctype,enterkeyhint,for,form,` +\n    `formaction,formenctype,formmethod,formnovalidate,formtarget,headers,` +\n    `height,hidden,high,href,hreflang,http-equiv,icon,id,importance,integrity,` +\n    `ismap,itemprop,keytype,kind,label,lang,language,loading,list,loop,low,` +\n    `manifest,max,maxlength,minlength,media,min,multiple,muted,name,novalidate,` +\n    `open,optimum,pattern,ping,placeholder,poster,preload,radiogroup,readonly,` +\n    `referrerpolicy,rel,required,reversed,rows,rowspan,sandbox,scope,scoped,` +\n    `selected,shape,size,sizes,slot,span,spellcheck,src,srcdoc,srclang,srcset,` +\n    `start,step,style,summary,tabindex,target,title,translate,type,usemap,` +\n    `value,width,wrap`);\n/**\n * Generated from https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute\n */\nconst isKnownSvgAttr = /*#__PURE__*/ makeMap(`xmlns,accent-height,accumulate,additive,alignment-baseline,alphabetic,amplitude,` +\n    `arabic-form,ascent,attributeName,attributeType,azimuth,baseFrequency,` +\n    `baseline-shift,baseProfile,bbox,begin,bias,by,calcMode,cap-height,class,` +\n    `clip,clipPathUnits,clip-path,clip-rule,color,color-interpolation,` +\n    `color-interpolation-filters,color-profile,color-rendering,` +\n    `contentScriptType,contentStyleType,crossorigin,cursor,cx,cy,d,decelerate,` +\n    `descent,diffuseConstant,direction,display,divisor,dominant-baseline,dur,dx,` +\n    `dy,edgeMode,elevation,enable-background,end,exponent,fill,fill-opacity,` +\n    `fill-rule,filter,filterRes,filterUnits,flood-color,flood-opacity,` +\n    `font-family,font-size,font-size-adjust,font-stretch,font-style,` +\n    `font-variant,font-weight,format,from,fr,fx,fy,g1,g2,glyph-name,` +\n    `glyph-orientation-horizontal,glyph-orientation-vertical,glyphRef,` +\n    `gradientTransform,gradientUnits,hanging,height,href,hreflang,horiz-adv-x,` +\n    `horiz-origin-x,id,ideographic,image-rendering,in,in2,intercept,k,k1,k2,k3,` +\n    `k4,kernelMatrix,kernelUnitLength,kerning,keyPoints,keySplines,keyTimes,` +\n    `lang,lengthAdjust,letter-spacing,lighting-color,limitingConeAngle,local,` +\n    `marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,` +\n    `mask,maskContentUnits,maskUnits,mathematical,max,media,method,min,mode,` +\n    `name,numOctaves,offset,opacity,operator,order,orient,orientation,origin,` +\n    `overflow,overline-position,overline-thickness,panose-1,paint-order,path,` +\n    `pathLength,patternContentUnits,patternTransform,patternUnits,ping,` +\n    `pointer-events,points,pointsAtX,pointsAtY,pointsAtZ,preserveAlpha,` +\n    `preserveAspectRatio,primitiveUnits,r,radius,referrerPolicy,refX,refY,rel,` +\n    `rendering-intent,repeatCount,repeatDur,requiredExtensions,requiredFeatures,` +\n    `restart,result,rotate,rx,ry,scale,seed,shape-rendering,slope,spacing,` +\n    `specularConstant,specularExponent,speed,spreadMethod,startOffset,` +\n    `stdDeviation,stemh,stemv,stitchTiles,stop-color,stop-opacity,` +\n    `strikethrough-position,strikethrough-thickness,string,stroke,` +\n    `stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,` +\n    `stroke-miterlimit,stroke-opacity,stroke-width,style,surfaceScale,` +\n    `systemLanguage,tabindex,tableValues,target,targetX,targetY,text-anchor,` +\n    `text-decoration,text-rendering,textLength,to,transform,transform-origin,` +\n    `type,u1,u2,underline-position,underline-thickness,unicode,unicode-bidi,` +\n    `unicode-range,units-per-em,v-alphabetic,v-hanging,v-ideographic,` +\n    `v-mathematical,values,vector-effect,version,vert-adv-y,vert-origin-x,` +\n    `vert-origin-y,viewBox,viewTarget,visibility,width,widths,word-spacing,` +\n    `writing-mode,x,x-height,x1,x2,xChannelSelector,xlink:actuate,xlink:arcrole,` +\n    `xlink:href,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,` +\n    `xml:space,y,y1,y2,yChannelSelector,z,zoomAndPan`);\n\nconst escapeRE = /[\"'&<>]/;\nfunction escapeHtml(string) {\n    const str = '' + string;\n    const match = escapeRE.exec(str);\n    if (!match) {\n        return str;\n    }\n    let html = '';\n    let escaped;\n    let index;\n    let lastIndex = 0;\n    for (index = match.index; index < str.length; index++) {\n        switch (str.charCodeAt(index)) {\n            case 34: // \"\n                escaped = '&quot;';\n                break;\n            case 38: // &\n                escaped = '&amp;';\n                break;\n            case 39: // '\n                escaped = '&#39;';\n                break;\n            case 60: // <\n                escaped = '&lt;';\n                break;\n            case 62: // >\n                escaped = '&gt;';\n                break;\n            default:\n                continue;\n        }\n        if (lastIndex !== index) {\n            html += str.slice(lastIndex, index);\n        }\n        lastIndex = index + 1;\n        html += escaped;\n    }\n    return lastIndex !== index ? html + str.slice(lastIndex, index) : html;\n}\n// https://www.w3.org/TR/html52/syntax.html#comments\nconst commentStripRE = /^-?>|<!--|-->|--!>|<!-$/g;\nfunction escapeHtmlComment(src) {\n    return src.replace(commentStripRE, '');\n}\n\nfunction looseCompareArrays(a, b) {\n    if (a.length !== b.length)\n        return false;\n    let equal = true;\n    for (let i = 0; equal && i < a.length; i++) {\n        equal = looseEqual(a[i], b[i]);\n    }\n    return equal;\n}\nfunction looseEqual(a, b) {\n    if (a === b)\n        return true;\n    let aValidType = isDate(a);\n    let bValidType = isDate(b);\n    if (aValidType || bValidType) {\n        return aValidType && bValidType ? a.getTime() === b.getTime() : false;\n    }\n    aValidType = isSymbol(a);\n    bValidType = isSymbol(b);\n    if (aValidType || bValidType) {\n        return a === b;\n    }\n    aValidType = isArray(a);\n    bValidType = isArray(b);\n    if (aValidType || bValidType) {\n        return aValidType && bValidType ? looseCompareArrays(a, b) : false;\n    }\n    aValidType = isObject(a);\n    bValidType = isObject(b);\n    if (aValidType || bValidType) {\n        /* istanbul ignore if: this if will probably never be called */\n        if (!aValidType || !bValidType) {\n            return false;\n        }\n        const aKeysCount = Object.keys(a).length;\n        const bKeysCount = Object.keys(b).length;\n        if (aKeysCount !== bKeysCount) {\n            return false;\n        }\n        for (const key in a) {\n            const aHasKey = a.hasOwnProperty(key);\n            const bHasKey = b.hasOwnProperty(key);\n            if ((aHasKey && !bHasKey) ||\n                (!aHasKey && bHasKey) ||\n                !looseEqual(a[key], b[key])) {\n                return false;\n            }\n        }\n    }\n    return String(a) === String(b);\n}\nfunction looseIndexOf(arr, val) {\n    return arr.findIndex(item => looseEqual(item, val));\n}\n\n/**\n * For converting {{ interpolation }} values to displayed strings.\n * @private\n */\nconst toDisplayString = (val) => {\n    return isString(val)\n        ? val\n        : val == null\n            ? ''\n            : isArray(val) ||\n                (isObject(val) &&\n                    (val.toString === objectToString || !isFunction(val.toString)))\n                ? JSON.stringify(val, replacer, 2)\n                : String(val);\n};\nconst replacer = (_key, val) => {\n    // can't use isRef here since @vue/shared has no deps\n    if (val && val.__v_isRef) {\n        return replacer(_key, val.value);\n    }\n    else if (isMap(val)) {\n        return {\n            [`Map(${val.size})`]: [...val.entries()].reduce((entries, [key, val]) => {\n                entries[`${key} =>`] = val;\n                return entries;\n            }, {})\n        };\n    }\n    else if (isSet(val)) {\n        return {\n            [`Set(${val.size})`]: [...val.values()]\n        };\n    }\n    else if (isObject(val) && !isArray(val) && !isPlainObject(val)) {\n        return String(val);\n    }\n    return val;\n};\n\nconst EMPTY_OBJ = (process.env.NODE_ENV !== 'production')\n    ? Object.freeze({})\n    : {};\nconst EMPTY_ARR = (process.env.NODE_ENV !== 'production') ? Object.freeze([]) : [];\nconst NOOP = () => { };\n/**\n * Always return false.\n */\nconst NO = () => false;\nconst onRE = /^on[^a-z]/;\nconst isOn = (key) => onRE.test(key);\nconst isModelListener = (key) => key.startsWith('onUpdate:');\nconst extend = Object.assign;\nconst remove = (arr, el) => {\n    const i = arr.indexOf(el);\n    if (i > -1) {\n        arr.splice(i, 1);\n    }\n};\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\nconst hasOwn = (val, key) => hasOwnProperty.call(val, key);\nconst isArray = Array.isArray;\nconst isMap = (val) => toTypeString(val) === '[object Map]';\nconst isSet = (val) => toTypeString(val) === '[object Set]';\nconst isDate = (val) => toTypeString(val) === '[object Date]';\nconst isFunction = (val) => typeof val === 'function';\nconst isString = (val) => typeof val === 'string';\nconst isSymbol = (val) => typeof val === 'symbol';\nconst isObject = (val) => val !== null && typeof val === 'object';\nconst isPromise = (val) => {\n    return isObject(val) && isFunction(val.then) && isFunction(val.catch);\n};\nconst objectToString = Object.prototype.toString;\nconst toTypeString = (value) => objectToString.call(value);\nconst toRawType = (value) => {\n    // extract \"RawType\" from strings like \"[object RawType]\"\n    return toTypeString(value).slice(8, -1);\n};\nconst isPlainObject = (val) => toTypeString(val) === '[object Object]';\nconst isIntegerKey = (key) => isString(key) &&\n    key !== 'NaN' &&\n    key[0] !== '-' &&\n    '' + parseInt(key, 10) === key;\nconst isReservedProp = /*#__PURE__*/ makeMap(\n// the leading comma is intentional so empty string \"\" is also included\n',key,ref,ref_for,ref_key,' +\n    'onVnodeBeforeMount,onVnodeMounted,' +\n    'onVnodeBeforeUpdate,onVnodeUpdated,' +\n    'onVnodeBeforeUnmount,onVnodeUnmounted');\nconst isBuiltInDirective = /*#__PURE__*/ makeMap('bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text,memo');\nconst cacheStringFunction = (fn) => {\n    const cache = Object.create(null);\n    return ((str) => {\n        const hit = cache[str];\n        return hit || (cache[str] = fn(str));\n    });\n};\nconst camelizeRE = /-(\\w)/g;\n/**\n * @private\n */\nconst camelize = cacheStringFunction((str) => {\n    return str.replace(camelizeRE, (_, c) => (c ? c.toUpperCase() : ''));\n});\nconst hyphenateRE = /\\B([A-Z])/g;\n/**\n * @private\n */\nconst hyphenate = cacheStringFunction((str) => str.replace(hyphenateRE, '-$1').toLowerCase());\n/**\n * @private\n */\nconst capitalize = cacheStringFunction((str) => str.charAt(0).toUpperCase() + str.slice(1));\n/**\n * @private\n */\nconst toHandlerKey = cacheStringFunction((str) => str ? `on${capitalize(str)}` : ``);\n// compare whether a value has changed, accounting for NaN.\nconst hasChanged = (value, oldValue) => !Object.is(value, oldValue);\nconst invokeArrayFns = (fns, arg) => {\n    for (let i = 0; i < fns.length; i++) {\n        fns[i](arg);\n    }\n};\nconst def = (obj, key, value) => {\n    Object.defineProperty(obj, key, {\n        configurable: true,\n        enumerable: false,\n        value\n    });\n};\nconst toNumber = (val) => {\n    const n = parseFloat(val);\n    return isNaN(n) ? val : n;\n};\nlet _globalThis;\nconst getGlobalThis = () => {\n    return (_globalThis ||\n        (_globalThis =\n            typeof globalThis !== 'undefined'\n                ? globalThis\n                : typeof self !== 'undefined'\n                    ? self\n                    : typeof window !== 'undefined'\n                        ? window\n                        : typeof global !== 'undefined'\n                            ? global\n                            : {}));\n};\nconst identRE = /^[_$a-zA-Z\\xA0-\\uFFFF][_$a-zA-Z0-9\\xA0-\\uFFFF]*$/;\nfunction genPropsAccessExp(name) {\n    return identRE.test(name)\n        ? `__props.${name}`\n        : `__props[${JSON.stringify(name)}]`;\n}\n\nexport { EMPTY_ARR, EMPTY_OBJ, NO, NOOP, PatchFlagNames, camelize, capitalize, def, escapeHtml, escapeHtmlComment, extend, genPropsAccessExp, generateCodeFrame, getGlobalThis, hasChanged, hasOwn, hyphenate, includeBooleanAttr, invokeArrayFns, isArray, isBooleanAttr, isBuiltInDirective, isDate, isFunction, isGloballyWhitelisted, isHTMLTag, isIntegerKey, isKnownHtmlAttr, isKnownSvgAttr, isMap, isModelListener, isObject, isOn, isPlainObject, isPromise, isReservedProp, isSSRSafeAttrName, isSVGTag, isSet, isSpecialBooleanAttr, isString, isSymbol, isVoidTag, looseEqual, looseIndexOf, makeMap, normalizeClass, normalizeProps, normalizeStyle, objectToString, parseStringStyle, propsToAttrMap, remove, slotFlagsText, stringifyStyle, toDisplayString, toHandlerKey, toNumber, toRawType, toTypeString };\n","let queued = false\r\nconst queue: Function[] = []\r\nconst p = Promise.resolve()\r\n\r\nexport const nextTick = (fn: () => void) => p.then(fn)\r\n\r\nexport const queueJob = (job: Function) => {\r\n  if (!queue.includes(job)) queue.push(job)\r\n  if (!queued) {\r\n    queued = true\r\n    nextTick(flushJobs)\r\n  }\r\n}\r\n\r\nconst flushJobs = () => {\r\n  for (const job of queue) {\r\n    job()\r\n  }\r\n  queue.length = 0\r\n  queued = false\r\n}\r\n","import { Directive } from '.'\r\nimport {\r\n  normalizeClass,\r\n  normalizeStyle,\r\n  isString,\r\n  isArray,\r\n  hyphenate,\r\n  camelize\r\n} from '@vue/shared'\r\n\r\nconst forceAttrRE = /^(spellcheck|draggable|form|list|type)$/\r\n\r\nexport const bind: Directive<Element & { _class?: string }> = ({\r\n  el,\r\n  get,\r\n  effect,\r\n  arg,\r\n  modifiers\r\n}) => {\r\n  let prevValue: any\r\n\r\n  // 记录静态类名\r\n  if (arg === 'class') {\r\n    el._class = el.className\r\n  }\r\n\r\n  effect(() => {\r\n    let value = get()\r\n    if (arg) {\r\n      if (modifiers?.camel) {\r\n        arg = camelize(arg)\r\n      }\r\n      setProp(el, arg, value, prevValue)\r\n    } else {\r\n      for (const key in value) {\r\n        setProp(el, key, value[key], prevValue && prevValue[key])\r\n      }\r\n      for (const key in prevValue) {\r\n        if (!value || !(key in value)) {\r\n          setProp(el, key, null)\r\n        }\r\n      }\r\n    }\r\n    prevValue = value\r\n  })\r\n}\r\n\r\nconst setProp = (\r\n  el: Element & { _class?: string },\r\n  key: string,\r\n  value: any,\r\n  prevValue?: any\r\n) => {\r\n  if (key === 'class') {\r\n    el.setAttribute(\r\n      'class',\r\n      normalizeClass(el._class ? [el._class, value] : value) || ''\r\n    )\r\n  } else if (key === 'style') {\r\n    value = normalizeStyle(value)\r\n    const { style } = el as HTMLElement\r\n    if (!value) {\r\n      el.removeAttribute('style')\r\n    } else if (isString(value)) {\r\n      if (value !== prevValue) style.cssText = value\r\n    } else {\r\n      for (const key in value) {\r\n        setStyle(style, key, value[key])\r\n      }\r\n      if (prevValue && !isString(prevValue)) {\r\n        for (const key in prevValue) {\r\n          if (value[key] == null) {\r\n            setStyle(style, key, '')\r\n          }\r\n        }\r\n      }\r\n    }\r\n  } else if (\r\n    !(el instanceof SVGElement) &&\r\n    key in el &&\r\n    !forceAttrRE.test(key)\r\n  ) {\r\n    // @ts-ignore\r\n    el[key] = value\r\n    if (key === 'value') {\r\n      // @ts-ignore\r\n      el._value = value\r\n    }\r\n  } else {\r\n    // 特殊情况：<input v-model type=\"checkbox\"> 带有\r\n    // :true-value 和 :false-value\r\n    // 将值存储为 DOM 属性，因为非字符串值会被\r\n    // 转换为字符串\r\n    if (key === 'true-value') {\r\n      ;(el as any)._trueValue = value\r\n    } else if (key === 'false-value') {\r\n      ;(el as any)._falseValue = value\r\n    } else if (value != null) {\r\n      el.setAttribute(key, value)\r\n    } else {\r\n      el.removeAttribute(key)\r\n    }\r\n  }\r\n}\r\n\r\nconst importantRE = /\\s*!important$/\r\n\r\nconst setStyle = (\r\n  style: CSSStyleDeclaration,\r\n  name: string,\r\n  val: string | string[]\r\n) => {\r\n  if (isArray(val)) {\r\n    val.forEach((v) => setStyle(style, name, v))\r\n  } else {\r\n    if (name.startsWith('--')) {\r\n      // 自定义属性定义\r\n      style.setProperty(name, val)\r\n    } else {\r\n      if (importantRE.test(val)) {\r\n        // !important\r\n        style.setProperty(\r\n          hyphenate(name),\r\n          val.replace(importantRE, ''),\r\n          'important'\r\n        )\r\n      } else {\r\n        style[name as any] = val\r\n      }\r\n    }\r\n  }\r\n}\r\n","export const checkAttr = (el: Element, name: string): string | null => {\n  const val = el.getAttribute(name)\n  if (val != null) el.removeAttribute(name)\n  return val\n}\n\nexport const listen = (\n  el: Element,\n  event: string,\n  handler: any,\n  options?: any\n) => {\n  el.addEventListener(event, handler, options)\n}\n","import { Directive } from '.'\nimport { hyphenate } from '@vue/shared'\nimport { listen } from '../utils'\nimport { nextTick } from '../scheduler'\n\n// 与 vue 2 相同\nconst simplePathRE =\n  /^[A-Za-z_$][\\w$]*(?:\\.[A-Za-z_$][\\w$]*|\\['[^']*?']|\\[\"[^\"]*?\"]|\\[\\d+]|\\[[A-Za-z_$][\\w$]*])*$/\n\nconst systemModifiers = ['ctrl', 'shift', 'alt', 'meta']\n\ntype KeyedEvent = KeyboardEvent | MouseEvent | TouchEvent\n\nconst modifierGuards: Record<\n  string,\n  (e: Event, modifiers: Record<string, true>) => void | boolean\n> = {\n  stop: (e) => e.stopPropagation(),\n  prevent: (e) => e.preventDefault(),\n  self: (e) => e.target !== e.currentTarget,\n  ctrl: (e) => !(e as KeyedEvent).ctrlKey,\n  shift: (e) => !(e as KeyedEvent).shiftKey,\n  alt: (e) => !(e as KeyedEvent).altKey,\n  meta: (e) => !(e as KeyedEvent).metaKey,\n  left: (e) => 'button' in e && (e as MouseEvent).button !== 0,\n  middle: (e) => 'button' in e && (e as MouseEvent).button !== 1,\n  right: (e) => 'button' in e && (e as MouseEvent).button !== 2,\n  exact: (e, modifiers) =>\n    systemModifiers.some((m) => (e as any)[`${m}Key`] && !modifiers[m])\n}\n\nexport const on: Directive = ({ el, get, exp, arg, modifiers }) => {\n  if (!arg) {\n    if (import.meta.env.DEV) {\n      console.error(`petite-vue 不支持 v-on=\"obj\" 语法。`)\n    }\n    return\n  }\n\n  let handler = simplePathRE.test(exp)\n    ? get(`(e => ${exp}(e))`)\n    : get(`($event => { ${exp} })`)\n\n  // 特殊的生命周期事件\n  if (import.meta.env.DEV && (arg === 'mounted' || arg === 'unmounted')) {\n    console.error(\n      `mounted 和 unmounted 钩子现在需要添加 vue: 前缀：` +\n        `- 请使用 @vue:${arg}=\"handler\" 替代。`\n    )\n  }\n  if (arg === 'vue:mounted') {\n    nextTick(handler)\n    return\n  } else if (arg === 'vue:unmounted') {\n    return () => handler()\n  }\n\n  if (modifiers) {\n    // 映射修饰符\n    if (arg === 'click') {\n      if (modifiers.right) arg = 'contextmenu'\n      if (modifiers.middle) arg = 'mouseup'\n    }\n\n    const raw = handler\n    handler = (e: Event) => {\n      if ('key' in e && !(hyphenate((e as KeyboardEvent).key) in modifiers)) {\n        return\n      }\n      for (const key in modifiers) {\n        const guard = modifierGuards[key]\n        if (guard && guard(e, modifiers)) {\n          return\n        }\n      }\n      return raw(e)\n    }\n  }\n\n  listen(el, arg, handler, modifiers)\n}\n","import { isObject } from '@vue/shared'\nimport { Directive } from '.'\n\nexport const text: Directive<Text | Element> = ({ el, get, effect }) => {\n  effect(() => {\n    el.textContent = toDisplayString(get())\n  })\n}\n\nexport const toDisplayString = (value: any) =>\n  value == null\n    ? ''\n    : isObject(value)\n    ? JSON.stringify(value, null, 2)\n    : String(value)\n","import { isArray, looseEqual, looseIndexOf, toNumber } from '@vue/shared'\r\nimport { Directive } from '.'\r\nimport { listen } from '../utils'\r\n\r\nexport const model: Directive<\r\n  HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement\r\n> = ({ el, exp, get, effect, modifiers }) => {\r\n  const type = el.type\r\n  const assign = get(`(val) => { ${exp} = val }`)\r\n  const { trim, number = type === 'number' } = modifiers || {}\r\n\r\n  if (el.tagName === 'SELECT') {\r\n    const sel = el as HTMLSelectElement\r\n    listen(el, 'change', () => {\r\n      const selectedVal = Array.prototype.filter\r\n        .call(sel.options, (o: HTMLOptionElement) => o.selected)\r\n        .map((o: HTMLOptionElement) =>\r\n          number ? toNumber(getValue(o)) : getValue(o)\r\n        )\r\n      assign(sel.multiple ? selectedVal : selectedVal[0])\r\n    })\r\n    effect(() => {\r\n      const value = get()\r\n      const isMultiple = sel.multiple\r\n      for (let i = 0, l = sel.options.length; i < l; i++) {\r\n        const option = sel.options[i]\r\n        const optionValue = getValue(option)\r\n        if (isMultiple) {\r\n          if (isArray(value)) {\r\n            option.selected = looseIndexOf(value, optionValue) > -1\r\n          } else {\r\n            option.selected = value.has(optionValue)\r\n          }\r\n        } else {\r\n          if (looseEqual(getValue(option), value)) {\r\n            if (sel.selectedIndex !== i) sel.selectedIndex = i\r\n            return\r\n          }\r\n        }\r\n      }\r\n      if (!isMultiple && sel.selectedIndex !== -1) {\r\n        sel.selectedIndex = -1\r\n      }\r\n    })\r\n  } else if (type === 'checkbox') {\r\n    listen(el, 'change', () => {\r\n      const modelValue = get()\r\n      const checked = (el as HTMLInputElement).checked\r\n      if (isArray(modelValue)) {\r\n        const elementValue = getValue(el)\r\n        const index = looseIndexOf(modelValue, elementValue)\r\n        const found = index !== -1\r\n        if (checked && !found) {\r\n          assign(modelValue.concat(elementValue))\r\n        } else if (!checked && found) {\r\n          const filtered = [...modelValue]\r\n          filtered.splice(index, 1)\r\n          assign(filtered)\r\n        }\r\n      } else {\r\n        assign(getCheckboxValue(el as HTMLInputElement, checked))\r\n      }\r\n    })\r\n\r\n    let oldValue: any\r\n    effect(() => {\r\n      const value = get()\r\n      if (isArray(value)) {\r\n        ;(el as HTMLInputElement).checked =\r\n          looseIndexOf(value, getValue(el)) > -1\r\n      } else if (value !== oldValue) {\r\n        ;(el as HTMLInputElement).checked = looseEqual(\r\n          value,\r\n          getCheckboxValue(el as HTMLInputElement, true)\r\n        )\r\n      }\r\n      oldValue = value\r\n    })\r\n  } else if (type === 'radio') {\r\n    listen(el, 'change', () => {\r\n      assign(getValue(el))\r\n    })\r\n    let oldValue: any\r\n    effect(() => {\r\n      const value = get()\r\n      if (value !== oldValue) {\r\n        ;(el as HTMLInputElement).checked = looseEqual(value, getValue(el))\r\n      }\r\n    })\r\n  } else {\r\n    // 文本类型输入\r\n    const resolveValue = (val: string) => {\r\n      if (trim) return val.trim()\r\n      if (number) return toNumber(val)\r\n      return val\r\n    }\r\n\r\n    listen(el, 'compositionstart', onCompositionStart)\r\n    listen(el, 'compositionend', onCompositionEnd)\r\n    listen(el, modifiers?.lazy ? 'change' : 'input', () => {\r\n      if ((el as any).composing) return\r\n      assign(resolveValue(el.value))\r\n    })\r\n    if (trim) {\r\n      listen(el, 'change', () => {\r\n        el.value = el.value.trim()\r\n      })\r\n    }\r\n\r\n    effect(() => {\r\n      if ((el as any).composing) {\r\n        return\r\n      }\r\n      const curVal = el.value\r\n      const newVal = get()\r\n      if (document.activeElement === el && resolveValue(curVal) === newVal) {\r\n        return\r\n      }\r\n      if (curVal !== newVal) {\r\n        el.value = newVal\r\n      }\r\n    })\r\n  }\r\n}\r\n\r\nconst getValue = (el: any) => ('_value' in el ? el._value : el.value)\r\n\r\n// 获取通过 :true-value 或 :false-value 绑定设置的原始值\r\nconst getCheckboxValue = (\r\n  el: HTMLInputElement & { _trueValue?: any; _falseValue?: any },\r\n  checked: boolean\r\n) => {\r\n  const key = checked ? '_trueValue' : '_falseValue'\r\n  return key in el ? el[key] : checked\r\n}\r\n\r\nconst onCompositionStart = (e: Event) => {\r\n  ;(e.target as any).composing = true\r\n}\r\n\r\nconst onCompositionEnd = (e: Event) => {\r\n  const target = e.target as any\r\n  if (target.composing) {\r\n    target.composing = false\r\n    trigger(target, 'input')\r\n  }\r\n}\r\n\r\nconst trigger = (el: HTMLElement, type: string) => {\r\n  const e = document.createEvent('HTMLEvents')\r\n  e.initEvent(type, true, true)\r\n  el.dispatchEvent(e)\r\n}\r\n","const evalCache: Record<string, Function> = Object.create(null)\r\n\r\nexport const evaluate = (scope: any, exp: string, el?: Node) =>\r\n  execute(scope, `return(${exp})`, el)\r\n\r\nexport const execute = (scope: any, exp: string, el?: Node) => {\r\n  const fn = evalCache[exp] || (evalCache[exp] = toFunction(exp))\r\n  try {\r\n    return fn(scope, el)\r\n  } catch (e) {\r\n    if (import.meta.env.DEV) {\r\n      console.warn(`计算表达式 \"${exp}\" 时出错：`)\r\n    }\r\n    console.error(e)\r\n  }\r\n}\r\n\r\nconst toFunction = (exp: string): Function => {\r\n  try {\r\n    return new Function(`$data`, `$el`, `with($data){${exp}}`)\r\n  } catch (e) {\r\n    console.error(`表达式 ${exp} 中出错：${(e as Error).message}`)\r\n    return () => {}\r\n  }\r\n}\r\n","import { Context } from '../context'\nimport { effect as rawEffect } from '@vue/reactivity'\nimport { bind } from './bind'\nimport { on } from './on'\nimport { show } from './show'\nimport { text } from './text'\nimport { html } from './html'\nimport { model } from './model'\nimport { effect } from './effect'\n\nexport interface Directive<T = Element> {\n  (ctx: DirectiveContext<T>): (() => void) | void\n}\n\nexport interface DirectiveContext<T = Element> {\n  el: T\n  get: (exp?: string) => any\n  effect: typeof rawEffect\n  exp: string\n  arg?: string\n  modifiers?: Record<string, true>\n  ctx: Context\n}\n\nexport const builtInDirectives: Record<string, Directive<any>> = {\n  bind,\n  on,\n  show,\n  text,\n  html,\n  model,\n  effect\n}\n","import { Directive } from '.'\n\nexport const show: Directive<HTMLElement> = ({ el, get, effect }) => {\n  const initialDisplay = el.style.display\n  effect(() => {\n    el.style.display = get() ? initialDisplay : 'none'\n  })\n}\n","import { Directive } from '.'\n\nexport const html: Directive = ({ el, get, effect }) => {\n  effect(() => {\n    el.innerHTML = get()\n  })\n}\n","import { Directive } from '.'\nimport { execute } from '../eval'\nimport { nextTick } from '../scheduler'\n\nexport const effect: Directive = ({ el, ctx, exp, effect }) => {\n  nextTick(() => effect(() => execute(ctx.scope, exp, el)))\n}\n","import { isArray, isObject } from '@vue/shared'\r\nimport { Block } from '../block'\r\nimport { evaluate } from '../eval'\r\nimport { Context, createScopedContext } from '../context'\r\n\r\nconst forAliasRE = /([\\s\\S]*?)\\s+(?:in|of)\\s+([\\s\\S]*)/\r\nconst forIteratorRE = /,([^,\\}\\]]*)(?:,([^,\\}\\]]*))?$/\r\nconst stripParensRE = /^\\(|\\)$/g\r\nconst destructureRE = /^[{[]\\s*((?:[\\w_$]+\\s*,?\\s*)+)[\\]}]$/\r\n\r\ntype KeyToIndexMap = Map<any, number>\r\n\r\nexport const _for = (el: Element, exp: string, ctx: Context) => {\r\n  const inMatch = exp.match(forAliasRE)\r\n  if (!inMatch) {\r\n    import.meta.env.DEV && console.warn(`无效的 v-for 表达式：${exp}`)\r\n    return\r\n  }\r\n\r\n  const nextNode = el.nextSibling\r\n\r\n  const parent = el.parentElement!\r\n  const anchor = new Text('')\r\n  parent.insertBefore(anchor, el)\r\n  parent.removeChild(el)\r\n\r\n  const sourceExp = inMatch[2].trim()\r\n  let valueExp = inMatch[1].trim().replace(stripParensRE, '').trim()\r\n  let destructureBindings: string[] | undefined\r\n  let isArrayDestructure = false\r\n  let indexExp: string | undefined\r\n  let objIndexExp: string | undefined\r\n\r\n  let keyAttr = 'key'\r\n  let keyExp =\r\n    el.getAttribute(keyAttr) ||\r\n    el.getAttribute((keyAttr = ':key')) ||\r\n    el.getAttribute((keyAttr = 'v-bind:key'))\r\n  if (keyExp) {\r\n    el.removeAttribute(keyAttr)\r\n    if (keyAttr === 'key') keyExp = JSON.stringify(keyExp)\r\n  }\r\n\r\n  let match\r\n  if ((match = valueExp.match(forIteratorRE))) {\r\n    valueExp = valueExp.replace(forIteratorRE, '').trim()\r\n    indexExp = match[1].trim()\r\n    if (match[2]) {\r\n      objIndexExp = match[2].trim()\r\n    }\r\n  }\r\n\r\n  if ((match = valueExp.match(destructureRE))) {\r\n    destructureBindings = match[1].split(',').map((s) => s.trim())\r\n    isArrayDestructure = valueExp[0] === '['\r\n  }\r\n\r\n  let mounted = false\r\n  let blocks: Block[]\r\n  let childCtxs: Context[]\r\n  let keyToIndexMap: Map<any, number>\r\n\r\n  const createChildContexts = (source: unknown): [Context[], KeyToIndexMap] => {\r\n    const map: KeyToIndexMap = new Map()\r\n    const ctxs: Context[] = []\r\n\r\n    if (isArray(source)) {\r\n      for (let i = 0; i < source.length; i++) {\r\n        ctxs.push(createChildContext(map, source[i], i))\r\n      }\r\n    } else if (typeof source === 'number') {\r\n      for (let i = 0; i < source; i++) {\r\n        ctxs.push(createChildContext(map, i + 1, i))\r\n      }\r\n    } else if (isObject(source)) {\r\n      let i = 0\r\n      for (const key in source) {\r\n        ctxs.push(createChildContext(map, source[key], i++, key))\r\n      }\r\n    }\r\n\r\n    return [ctxs, map]\r\n  }\r\n\r\n  const createChildContext = (\r\n    map: KeyToIndexMap,\r\n    value: any,\r\n    index: number,\r\n    objKey?: string\r\n  ): Context => {\r\n    const data: any = {}\r\n    if (destructureBindings) {\r\n      destructureBindings.forEach(\r\n        (b, i) => (data[b] = value[isArrayDestructure ? i : b])\r\n      )\r\n    } else {\r\n      data[valueExp] = value\r\n    }\r\n    if (objKey) {\r\n      indexExp && (data[indexExp] = objKey)\r\n      objIndexExp && (data[objIndexExp] = index)\r\n    } else {\r\n      indexExp && (data[indexExp] = index)\r\n    }\r\n    const childCtx = createScopedContext(ctx, data)\r\n    const key = keyExp ? evaluate(childCtx.scope, keyExp) : index\r\n    map.set(key, index)\r\n    childCtx.key = key\r\n    return childCtx\r\n  }\r\n\r\n  const mountBlock = (ctx: Context, ref: Node) => {\r\n    const block = new Block(el, ctx)\r\n    block.key = ctx.key\r\n    block.insert(parent, ref)\r\n    return block\r\n  }\r\n\r\n  ctx.effect(() => {\r\n    const source = evaluate(ctx.scope, sourceExp)\r\n    const prevKeyToIndexMap = keyToIndexMap\r\n    ;[childCtxs, keyToIndexMap] = createChildContexts(source)\r\n    if (!mounted) {\r\n      blocks = childCtxs.map((s) => mountBlock(s, anchor))\r\n      mounted = true\r\n    } else {\r\n      for (let i = 0; i < blocks.length; i++) {\r\n        if (!keyToIndexMap.has(blocks[i].key)) {\r\n          blocks[i].remove()\r\n        }\r\n      }\r\n      \r\n      const nextBlocks: Block[] = []\r\n      let i = childCtxs.length\r\n      let nextBlock: Block | undefined\r\n      let prevMovedBlock: Block | undefined\r\n      while (i--) {\r\n        const childCtx = childCtxs[i]\r\n        const oldIndex = prevKeyToIndexMap.get(childCtx.key)\r\n        let block\r\n        if (oldIndex == null) {\r\n          // 新增\r\n          block = mountBlock(\r\n            childCtx,\r\n            nextBlock ? nextBlock.el : anchor\r\n          )\r\n        } else {\r\n          // 更新\r\n          block = blocks[oldIndex]\r\n          Object.assign(block.ctx.scope, childCtx.scope)\r\n          if (oldIndex !== i) {\r\n            // 移动\r\n            if (\r\n              blocks[oldIndex + 1] !== nextBlock || \r\n              // 如果下一个已经移动，这个也必须移动\r\n              prevMovedBlock === nextBlock\r\n            ) {\r\n              prevMovedBlock = block\r\n              block.insert(parent, nextBlock ? nextBlock.el : anchor)\r\n            }\r\n          }\r\n        }\r\n        nextBlocks.unshift(nextBlock = block)\r\n      }\r\n      blocks = nextBlocks\r\n    }\r\n  })\r\n\r\n  return nextNode\r\n}\r\n","import { Directive } from '.'\r\n\r\nexport const ref: Directive = ({\r\n  el,\r\n  ctx: {\r\n    scope: { $refs }\r\n  },\r\n  get,\r\n  effect\r\n}) => {\r\n  let prevRef: any\r\n  effect(() => {\r\n    const ref = get()\r\n    $refs[ref] = el\r\n    if (prevRef && ref !== prevRef) {\r\n      delete $refs[prevRef]\r\n    }\r\n    prevRef = ref\r\n  })\r\n  return () => {\r\n    prevRef && delete $refs[prevRef]\r\n  }\r\n}\r\n","import { builtInDirectives, Directive } from './directives'\r\nimport { _if } from './directives/if'\r\nimport { _for } from './directives/for'\r\nimport { bind } from './directives/bind'\r\nimport { on } from './directives/on'\r\nimport { text } from './directives/text'\r\nimport { evaluate } from './eval'\r\nimport { checkAttr } from './utils'\r\nimport { ref } from './directives/ref'\r\nimport { Context, createScopedContext } from './context'\r\n\r\nconst dirRE = /^(?:v-|:|@)/\r\nconst modifierRE = /\\.([\\w-]+)/g\r\n\r\nexport let inOnce = false\r\n\r\nexport const walk = (node: Node, ctx: Context): ChildNode | null | void => {\r\n  const type = node.nodeType\r\n  if (type === 1) {\r\n    // 元素节点\r\n    const el = node as Element\r\n    if (el.hasAttribute('v-pre')) {\r\n      return\r\n    }\r\n\r\n    checkAttr(el, 'v-cloak')\r\n\r\n    let exp: string | null\r\n\r\n    // v-if\r\n    if ((exp = checkAttr(el, 'v-if'))) {\r\n      return _if(el, exp, ctx)\r\n    }\r\n\r\n    // v-for\r\n    if ((exp = checkAttr(el, 'v-for'))) {\r\n      return _for(el, exp, ctx)\r\n    }\r\n\r\n    // v-scope\r\n    if ((exp = checkAttr(el, 'v-scope')) || exp === '') {\r\n      const scope = exp ? evaluate(ctx.scope, exp) : {}\r\n      ctx = createScopedContext(ctx, scope)\r\n      if (scope.$template) {\r\n        resolveTemplate(el, scope.$template)\r\n      }\r\n    }\r\n\r\n    // v-once\r\n    const hasVOnce = checkAttr(el, 'v-once') != null\r\n    if (hasVOnce) {\r\n      inOnce = true\r\n    }\r\n\r\n    // ref\r\n    if ((exp = checkAttr(el, 'ref'))) {\r\n      applyDirective(el, ref, `\"${exp}\"`, ctx)\r\n    }\r\n\r\n    // 先处理子节点，再处理自身属性\r\n    walkChildren(el, ctx)\r\n\r\n    // 其他指令\r\n    const deferred: [string, string][] = []\r\n    for (const { name, value } of [...el.attributes]) {\r\n      if (dirRE.test(name) && name !== 'v-cloak') {\r\n        if (name === 'v-model') {\r\n          // 延迟处理 v-model，因为它依赖于 :value 绑定先被处理\r\n          // 但要在 v-on 监听器之前处理 (#73)\r\n          deferred.unshift([name, value])\r\n        } else if (name[0] === '@' || /^v-on\\b/.test(name)) {\r\n          deferred.push([name, value])\r\n        } else {\r\n          processDirective(el, name, value, ctx)\r\n        }\r\n      }\r\n    }\r\n    for (const [name, value] of deferred) {\r\n      processDirective(el, name, value, ctx)\r\n    }\r\n\r\n    if (hasVOnce) {\r\n      inOnce = false\r\n    }\r\n  } else if (type === 3) {\r\n    // 文本节点\r\n    const data = (node as Text).data\r\n    if (data.includes(ctx.delimiters[0])) {\r\n      let segments: string[] = []\r\n      let lastIndex = 0\r\n      let match\r\n      while ((match = ctx.delimitersRE.exec(data))) {\r\n        const leading = data.slice(lastIndex, match.index)\r\n        if (leading) segments.push(JSON.stringify(leading))\r\n        segments.push(`$s(${match[1]})`)\r\n        lastIndex = match.index + match[0].length\r\n      }\r\n      if (lastIndex < data.length) {\r\n        segments.push(JSON.stringify(data.slice(lastIndex)))\r\n      }\r\n      applyDirective(node, text, segments.join('+'), ctx)\r\n    }\r\n  } else if (type === 11) {\r\n    walkChildren(node as DocumentFragment, ctx)\r\n  }\r\n}\r\n\r\nconst walkChildren = (node: Element | DocumentFragment, ctx: Context) => {\r\n  let child = node.firstChild\r\n  while (child) {\r\n    child = walk(child, ctx) || child.nextSibling\r\n  }\r\n}\r\n\r\nconst processDirective = (\r\n  el: Element,\r\n  raw: string,\r\n  exp: string,\r\n  ctx: Context\r\n) => {\r\n  let dir: Directive\r\n  let arg: string | undefined\r\n  let modifiers: Record<string, true> | undefined\r\n\r\n  // 修饰符\r\n  raw = raw.replace(modifierRE, (_, m) => {\r\n    ;(modifiers || (modifiers = {}))[m] = true\r\n    return ''\r\n  })\r\n\r\n  if (raw[0] === ':') {\r\n    dir = bind\r\n    arg = raw.slice(1)\r\n  } else if (raw[0] === '@') {\r\n    dir = on\r\n    arg = raw.slice(1)\r\n  } else {\r\n    const argIndex = raw.indexOf(':')\r\n    const dirName = argIndex > 0 ? raw.slice(2, argIndex) : raw.slice(2)\r\n    dir = builtInDirectives[dirName] || ctx.dirs[dirName]\r\n    arg = argIndex > 0 ? raw.slice(argIndex + 1) : undefined\r\n  }\r\n  if (dir) {\r\n    if (dir === bind && arg === 'ref') dir = ref\r\n    applyDirective(el, dir, exp, ctx, arg, modifiers)\r\n    el.removeAttribute(raw)\r\n  } else if (import.meta.env.DEV) {\r\n    console.error(`未知的自定义指令 ${raw}。`)\r\n  }\r\n}\r\n\r\nconst applyDirective = (\r\n  el: Node,\r\n  dir: Directive<any>,\r\n  exp: string,\r\n  ctx: Context,\r\n  arg?: string,\r\n  modifiers?: Record<string, true>\r\n) => {\r\n  const get = (e = exp) => evaluate(ctx.scope, e, el)\r\n  const cleanup = dir({\r\n    el,\r\n    get,\r\n    effect: ctx.effect,\r\n    ctx,\r\n    exp,\r\n    arg,\r\n    modifiers\r\n  })\r\n  if (cleanup) {\r\n    ctx.cleanups.push(cleanup)\r\n  }\r\n}\r\n\r\nconst resolveTemplate = (el: Element, template: string) => {\r\n  if (template[0] === '#') {\r\n    const templateEl = document.querySelector(template)\r\n    if (import.meta.env.DEV && !templateEl) {\r\n      console.error(\r\n        `模板选择器 ${template} 没有匹配的 <template> 元素。`\r\n      )\r\n    }\r\n    el.appendChild((templateEl as HTMLTemplateElement).content.cloneNode(true))\r\n    return\r\n  }\r\n  el.innerHTML = template\r\n}\r\n","import { Block } from '../block'\nimport { evaluate } from '../eval'\nimport { checkAttr } from '../utils'\nimport { Context } from '../context'\n\ninterface Branch {\n  exp?: string | null\n  el: Element\n}\n\nexport const _if = (el: Element, exp: string, ctx: Context) => {\n  if (import.meta.env.DEV && !exp.trim()) {\n    console.warn(`v-if 表达式不能为空。`)\n  }\n\n  const parent = el.parentElement!\n  const anchor = new Comment('v-if')\n  parent.insertBefore(anchor, el)\n\n  const branches: Branch[] = [\n    {\n      exp,\n      el\n    }\n  ]\n\n  // 定位 else 分支\n  let elseEl: Element | null\n  let elseExp: string | null\n  while ((elseEl = el.nextElementSibling)) {\n    elseExp = null\n    if (\n      checkAttr(elseEl, 'v-else') === '' ||\n      (elseExp = checkAttr(elseEl, 'v-else-if'))\n    ) {\n      parent.removeChild(elseEl)\n      branches.push({ exp: elseExp, el: elseEl })\n    } else {\n      break\n    }\n  }\n\n  const nextNode = el.nextSibling\n  parent.removeChild(el)\n\n  let block: Block | undefined\n  let activeBranchIndex: number = -1\n\n  const removeActiveBlock = () => {\n    if (block) {\n      parent.insertBefore(anchor, block.el)\n      block.remove()\n      block = undefined\n    }\n  }\n\n  ctx.effect(() => {\n    for (let i = 0; i < branches.length; i++) {\n      const { exp, el } = branches[i]\n      if (!exp || evaluate(ctx.scope, exp)) {\n        if (i !== activeBranchIndex) {\n          removeActiveBlock()\n          block = new Block(el, ctx)\n          block.insert(parent, anchor)\n          parent.removeChild(anchor)\n          activeBranchIndex = i\n        }\n        return\n      }\n    }\n    // 没有匹配的分支\n    activeBranchIndex = -1\n    removeActiveBlock()\n  })\n\n  return nextNode\n}\n","import {\r\n  effect as rawEffect,\r\n  reactive,\r\n  ReactiveEffectRunner\r\n} from '@vue/reactivity'\r\nimport { Block } from './block'\r\nimport { Directive } from './directives'\r\nimport { queueJob } from './scheduler'\r\nimport { inOnce } from './walk'\r\nexport interface Context {\r\n  key?: any\r\n  scope: Record<string, any>\r\n  dirs: Record<string, Directive>\r\n  blocks: Block[]\r\n  effect: typeof rawEffect\r\n  effects: ReactiveEffectRunner[]\r\n  cleanups: (() => void)[]\r\n  delimiters: [string, string]\r\n  delimitersRE: RegExp\r\n}\r\n\r\nexport const createContext = (parent?: Context): Context => {\r\n  const ctx: Context = {\r\n    delimiters: ['{{', '}}'],\r\n    delimitersRE: /\\{\\{([^]+?)\\}\\}/g,\r\n    ...parent,\r\n    scope: parent ? parent.scope : reactive({}),\r\n    dirs: parent ? parent.dirs : {},\r\n    effects: [],\r\n    blocks: [],\r\n    cleanups: [],\r\n    effect: (fn) => {\r\n      if (inOnce) {\r\n        queueJob(fn)\r\n        return fn as any\r\n      }\r\n      const e: ReactiveEffectRunner = rawEffect(fn, {\r\n        scheduler: () => queueJob(e)\r\n      })\r\n      ctx.effects.push(e)\r\n      return e\r\n    }\r\n  }\r\n  return ctx\r\n}\r\n\r\nexport const createScopedContext = (ctx: Context, data = {}): Context => {\r\n  const parentScope = ctx.scope\r\n  const mergedScope = Object.create(parentScope)\r\n  Object.defineProperties(mergedScope, Object.getOwnPropertyDescriptors(data))\r\n  mergedScope.$refs = Object.create(parentScope.$refs)\r\n  const reactiveProxy = reactive(\r\n    new Proxy(mergedScope, {\r\n      set(target, key, val, receiver) {\r\n        // 当设置一个在当前作用域中不存在的属性时，\r\n        // 不要在当前作用域中创建它，而是回退到父作用域。\r\n        if (receiver === reactiveProxy && !target.hasOwnProperty(key)) {\r\n          return Reflect.set(parentScope, key, val)\r\n        }\r\n        return Reflect.set(target, key, val, receiver)\r\n      }\r\n    })\r\n  )\r\n\r\n  bindContextMethods(reactiveProxy)\r\n  return {\r\n    ...ctx,\r\n    scope: reactiveProxy\r\n  }\r\n}\r\n\r\nexport const bindContextMethods = (scope: Record<string, any>) => {\r\n  for (const key of Object.keys(scope)) {\r\n    if (typeof scope[key] === 'function') {\r\n      scope[key] = scope[key].bind(scope)\r\n    }\r\n  }\r\n}\r\n","import { Context, createContext } from './context'\r\nimport { walk } from './walk'\r\nimport { remove } from '@vue/shared'\r\nimport { stop } from '@vue/reactivity'\r\n\r\nexport class Block {\r\n  template: Element | DocumentFragment\r\n  ctx: Context\r\n  key?: any\r\n  parentCtx?: Context\r\n\r\n  isFragment: boolean\r\n  start?: Text\r\n  end?: Text\r\n\r\n  get el() {\r\n    return this.start || (this.template as Element)\r\n  }\r\n\r\n  constructor(template: Element, parentCtx: Context, isRoot = false) {\r\n    this.isFragment = template instanceof HTMLTemplateElement\r\n\r\n    if (isRoot) {\r\n      this.template = template\r\n    } else if (this.isFragment) {\r\n      this.template = (template as HTMLTemplateElement).content.cloneNode(\r\n        true\r\n      ) as DocumentFragment\r\n    } else {\r\n      this.template = template.cloneNode(true) as Element\r\n    }\r\n\r\n    if (isRoot) {\r\n      this.ctx = parentCtx\r\n    } else {\r\n      // 创建子上下文\r\n      this.parentCtx = parentCtx\r\n      parentCtx.blocks.push(this)\r\n      this.ctx = createContext(parentCtx)\r\n    }\r\n\r\n    walk(this.template, this.ctx)\r\n  }\r\n\r\n  insert(parent: Element, anchor: Node | null = null) {\r\n    if (this.isFragment) {\r\n      if (this.start) {\r\n        // 已经插入，正在移动\r\n        let node: Node | null = this.start\r\n        let next: Node | null\r\n        while (node) {\r\n          next = node.nextSibling\r\n          parent.insertBefore(node, anchor)\r\n          if (node === this.end) break\r\n          node = next\r\n        }\r\n      } else {\r\n        this.start = new Text('')\r\n        this.end = new Text('')\r\n        parent.insertBefore(this.end, anchor)\r\n        parent.insertBefore(this.start, this.end)\r\n        parent.insertBefore(this.template, this.end)\r\n      }\r\n    } else {\r\n      parent.insertBefore(this.template, anchor)\r\n    }\r\n  }\r\n\r\n  remove() {\r\n    if (this.parentCtx) {\r\n      remove(this.parentCtx.blocks, this)\r\n    }\r\n    if (this.start) {\r\n      const parent = this.start.parentNode!\r\n      let node: Node | null = this.start\r\n      let next: Node | null\r\n      while (node) {\r\n        next = node.nextSibling\r\n        parent.removeChild(node)\r\n        if (node === this.end) break\r\n        node = next\r\n      }\r\n    } else {\r\n      this.template.parentNode!.removeChild(this.template)\r\n    }\r\n    this.teardown()\r\n  }\r\n\r\n  teardown() {\r\n    this.ctx.blocks.forEach((child) => {\r\n      child.teardown()\r\n    })\r\n    this.ctx.effects.forEach(stop)\r\n    this.ctx.cleanups.forEach((fn) => fn())\r\n  }\r\n}\r\n","import { reactive } from '@vue/reactivity' // 响应式\r\nimport { Block } from './block' // 块级作用域\r\nimport { Directive } from './directives' // 指令\r\nimport { bindContextMethods, createContext } from './context' // 上下文\r\nimport { toDisplayString } from './directives/text' // 文本指令\r\nimport { nextTick } from './scheduler' // 调度器\r\n\r\nconst escapeRegex = (str: string) =>\r\n  str.replace(/[-.*+?^${}()|[\\]\\/\\\\]/g, '\\\\$&')\r\n\r\nexport const createApp = (initialData?: any) => {\r\n  // 根上下文\r\n  const ctx = createContext()\r\n  if (initialData) {\r\n    ctx.scope = reactive(initialData)\r\n    bindContextMethods(ctx.scope)\r\n\r\n    // 处理自定义分隔符\r\n    if (initialData.$delimiters) {\r\n      const [open, close] = (ctx.delimiters = initialData.$delimiters)\r\n      ctx.delimitersRE = new RegExp(\r\n        escapeRegex(open) + '([^]+?)' + escapeRegex(close),\r\n        'g'\r\n      )\r\n    }\r\n  }\r\n\r\n  // 全局内部辅助函数\r\n  ctx.scope.$s = toDisplayString  // 将表达式转换为字符串\r\n  ctx.scope.$nextTick = nextTick  // 调度器\r\n  ctx.scope.$refs = Object.create(null)  // 创建一个空对象\r\n\r\n  let rootBlocks: Block[]   // 根块\r\n\r\n  return {\r\n    directive(name: string, def?: Directive) {\r\n      if (def) {\r\n        ctx.dirs[name] = def\r\n        return this\r\n      } else {\r\n        return ctx.dirs[name]\r\n      }\r\n    },\r\n\r\n    mount(el?: string | Element | null) {\r\n      if (typeof el === 'string') {\r\n        el = document.querySelector(el)\r\n        if (!el) {\r\n          import.meta.env.DEV &&\r\n            console.error(`选择器 ${el} 没有匹配的元素。`)\r\n          return\r\n        }\r\n      }\r\n\r\n      el = el || document.documentElement\r\n      let roots: Element[]\r\n      if (el.hasAttribute('v-scope')) {\r\n        roots = [el]\r\n      } else {\r\n        // 只匹配顶层的 v-scope 元素\r\n        roots = [...el.querySelectorAll(`[v-scope]`)].filter(\r\n          (root) => !root.matches(`[v-scope] [v-scope]`)\r\n        )\r\n      }\r\n      // 如果没有任何根元素，则使用整个文档\r\n      if (!roots.length) {\r\n        roots = [el]\r\n      }\r\n\r\n      if (\r\n        import.meta.env.DEV &&\r\n        roots.length === 1 &&\r\n        roots[0] === document.documentElement\r\n      ) {\r\n        console.warn(\r\n          `挂载在 documentElement 上 - 这不是最优的，因为 Mist.js ` +\r\n            `将被迫遍历整个页面的 DOM。` +\r\n            `考虑使用 \\`v-scope\\` 明确标记由 Mist.js 控制的元素。`\r\n        )\r\n      }\r\n\r\n      // 创建根块\r\n      rootBlocks = roots.map((el) => new Block(el, ctx, true))\r\n      return this\r\n    },\r\n\r\n    unmount() {\r\n      rootBlocks.forEach((block) => block.teardown())\r\n    }\r\n  }\r\n}\r\n","export { createApp } from './app'\nexport { nextTick } from './scheduler'\nexport { reactive } from '@vue/reactivity'\n\nimport { createApp } from './app'\n\nconst s = document.currentScript\nif (s && s.hasAttribute('init')) {\n  createApp().mount()\n}\n"],"names":["normalizeStyle","value","isArray","res","i","length","item","normalized","isString","parseStringStyle","key","isObject","listDelimiterRE","propertyDelimiterRE","styleCommentRE","cssText","ret","replace","split","forEach","tmp","trim","normalizeClass","name","looseEqual","a","b","aValidType","isDate","bValidType","getTime","isSymbol","equal","looseCompareArrays","Object","keys","aHasKey","hasOwnProperty","bHasKey","String","looseIndexOf","arr","val","findIndex","extend","assign","prototype","hasOwn","call","Array","isMap","toTypeString","objectToString","toString","isIntegerKey","parseInt","cacheStringFunction","fn","cache","create","str","camelizeRE","camelize","_","c","toUpperCase","hyphenateRE","hyphenate","toLowerCase","toNumber","n","parseFloat","isNaN","expectsLowerCase","map","list","oldValue","is","slice","queued","queue","p","Promise","resolve","nextTick","then","queueJob","job","includes","push","flushJobs","forceAttrRE","bind","el","get","effect","arg","modifiers","prevValue","_class","className","camel","setProp","setAttribute","style","setStyle","removeAttribute","SVGElement","test","_trueValue","_falseValue","_value","importantRE","v","startsWith","setProperty","checkAttr","getAttribute","listen","event","handler","options","addEventListener","simplePathRE","systemModifiers","modifierGuards","stop","e","stopPropagation","prevent","preventDefault","self","target","currentTarget","ctrl","ctrlKey","shift","shiftKey","alt","altKey","meta","metaKey","left","button","middle","right","exact","some","m","on","exp","raw","guard","text","textContent","toDisplayString","JSON","stringify","getValue","getCheckboxValue","checked","onCompositionStart","composing","onCompositionEnd","trigger","type","document","createEvent","initEvent","dispatchEvent","evalCache","evaluate","scope","execute","toFunction","console","error","Function","message","builtInDirectives","show","initialDisplay","display","html","innerHTML","model","number","tagName","sel","selectedVal","filter","o","selected","multiple","isMultiple","l","option","optionValue","has","selectedIndex","modelValue","elementValue","index","found","concat","filtered","splice","resolveValue","lazy","curVal","newVal","activeElement","ctx","forAliasRE","forIteratorRE","stripParensRE","destructureRE","_for","inMatch","match","nextNode","nextSibling","parent","parentElement","anchor","Text","insertBefore","removeChild","sourceExp","destructureBindings","indexExp","objIndexExp","valueExp","isArrayDestructure","keyAttr","keyExp","s","blocks","childCtxs","keyToIndexMap","mounted","createChildContext","objKey","data","childCtx","createScopedContext","set","mountBlock","ref","block","Block","insert","source","prevKeyToIndexMap","Map","ctxs","createChildContexts","remove","nextBlocks","nextBlock","prevMovedBlock","oldIndex","unshift","$refs","prevRef","dirRE","modifierRE","inOnce","walk","node","nodeType","hasAttribute","Comment","branches","elseEl","elseExp","nextElementSibling","activeBranchIndex","removeActiveBlock","_if","$template","resolveTemplate","hasVOnce","applyDirective","walkChildren","deferred","attributes","processDirective","delimiters","segments","lastIndex","delimitersRE","exec","leading","join","child","firstChild","dir","argIndex","indexOf","dirName","dirs","cleanup","cleanups","template","templateEl","querySelector","appendChild","content","cloneNode","createContext","reactive","effects","rawEffect","scheduler","parentScope","mergedScope","defineProperties","getOwnPropertyDescriptors","reactiveProxy","Proxy","receiver","Reflect","bindContextMethods","this","start","constructor","parentCtx","isRoot","isFragment","HTMLTemplateElement","next","end","parentNode","teardown","escapeRegex","createApp","initialData","$delimiters","open","close","RegExp","rootBlocks","$s","$nextTick","directive","def","mount","roots","documentElement","querySelectorAll","root","matches","unmount","currentScript"],"mappings":"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"}